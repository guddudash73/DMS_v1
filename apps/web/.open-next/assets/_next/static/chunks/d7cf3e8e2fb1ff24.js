(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23621,e=>{"use strict";var a=e.i(43476),s=e.i(91918),t=e.i(25913),l=e.i(52236);let i=(0,t.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function r({className:e,variant:t,asChild:r=!1,...d}){let n=r?s.Slot:"span";return(0,a.jsx)(n,{"data-slot":"badge",className:(0,l.cn)(i({variant:t}),e),...d})}e.s(["Badge",()=>r])},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},88699,e=>{"use strict";let a=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>a],88699)},25466,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(48425),l=s.forwardRef((e,s)=>(0,a.jsx)(t.Primitive.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var i=e.i(52236);function r({className:e,...s}){return(0,a.jsx)(l,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>r],25466)},31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},99809,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(70317),l=e.i(66691),i=e.i(24911),r=e.i(23621),d=e.i(25466),n=e.i(82879),c=e.i(88699),o=e.i(27612),u=e.i(7233),x=e.i(55436),m=e.i(31278);let h=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var p=e.i(70931);let g=["QD","BID","TID","QID","HS","PRN"],f=["TABLET","CAPSULE","SYRUP","INJECTION","OINTMENT","GEL","MOUTHWASH","OTHER"],v=()=>({displayName:"",defaultDose:"",defaultFrequency:"",defaultDuration:void 0,form:""}),y=e=>{let a=e.trim();if(!a)return;let s=Number(a);return Number.isFinite(s)?s:void 0},j=e=>"string"==typeof e&&g.includes(e),N=e=>"string"==typeof e&&f.includes(e);function b({value:e,onChange:s,children:t,placeholder:l}){return(0,a.jsxs)("select",{className:"h-10 w-full rounded-xl border border-input bg-background px-3 text-sm outline-none ring-offset-background focus-visible:ring-2 focus-visible:ring-ring/50",value:e,onChange:e=>s(e.target.value),children:[l?(0,a.jsx)("option",{value:"",children:l}):null,t]})}function D(){let e=(0,p.useGetMeQuery)(),D=e.data?.userId??"",[w,C]=s.useState(""),[k,M]=s.useState("");s.useEffect(()=>{let e=window.setTimeout(()=>M(w.trim()),300);return()=>window.clearTimeout(e)},[w]);let[S,L]=s.useState(null),[F,q]=s.useState([]);s.useEffect(()=>{L(null),q([])},[k]);let T=(0,p.useListMedicinesCatalogQuery)({query:k||void 0,limit:12,cursor:S||void 0},{refetchOnMountOrArgChange:!0}),I=T.data?.items??[],B=T.data?.nextCursor??null,A=F.length>0,O=!!B,[P]=(0,p.useQuickAddMedicineMutation)(),[E,U]=(0,p.useDoctorUpdateMedicineMutation)(),[R,H]=(0,p.useDoctorDeleteMedicineMutation)(),[z,Q]=s.useState(!1),[V,Y]=s.useState(!1),[G,K]=s.useState(()=>v()),[$,J]=s.useState(()=>v()),[W,_]=s.useState(null),X=T.isLoading||U.isLoading||H.isLoading,Z=e=>!!D&&e.createdByUserId===D&&"INLINE_DOCTOR"===e.source,ee=async()=>{let e=G.displayName.trim();e&&(await P({displayName:e,defaultDose:G.defaultDose?.trim()||void 0,defaultFrequency:G.defaultFrequency?.trim()||void 0,defaultDuration:G.defaultDuration,form:G.form&&N(G.form)?G.form:void 0}).unwrap(),Q(!1),K(v()))},ea=async()=>{if(!W||!Z(W))return;let e=$.displayName.trim();e&&(await E({id:W.id,patch:{displayName:e,defaultDose:$.defaultDose?.trim()||void 0,defaultFrequency:$.defaultFrequency?.trim()||void 0,defaultDuration:$.defaultDuration,form:$.form&&N($.form)?$.form:void 0}}).unwrap(),Y(!1),_(null))},es=async e=>{!Z(e)||window.confirm(`Delete medicine "${e.displayName}"? This cannot be undone.`)&&await R({id:e.id}).unwrap()};return(0,a.jsxs)("div",{className:"p-4 2xl:p-12",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:"Medicines"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"You can view all medicines. You can edit/delete only medicines created by you."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative w-80",children:[(0,a.jsx)(x.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,a.jsx)(i.Input,{className:"h-9 rounded-xl pl-9 text-sm",placeholder:"Search medicines by name…",value:w,onChange:e=>C(e.target.value)})]}),(0,a.jsxs)(l.Button,{className:"h-9 rounded-xl",onClick:()=>Q(!0),children:[(0,a.jsx)(u.Plus,{className:"mr-2 h-4 w-4"}),"Add Medicine"]})]})]}),(0,a.jsxs)(t.Card,{className:"rounded-2xl border bg-white p-0 shadow-none",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b px-5 py-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:"Medicine Catalog"}),(0,a.jsxs)("div",{className:"text-[11px] text-gray-500",children:["Showing: ",(0,a.jsx)("span",{className:"font-medium text-gray-700",children:k||"All"})]})]}),T.isLoading&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(m.Loader2,{className:"h-4 w-4 animate-spin"}),"Loading…"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-[11px] font-semibold text-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-5 py-3",children:"Display Name"}),(0,a.jsx)("th",{className:"px-5 py-3",children:"Defaults"}),(0,a.jsx)("th",{className:"px-5 py-3",children:"Source"}),(0,a.jsx)("th",{className:"px-5 py-3",children:"Status"}),(0,a.jsx)("th",{className:"px-5 py-3 text-right",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"divide-y",children:[!T.isLoading&&0===I.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-5 py-6 text-sm text-gray-500",colSpan:5,children:"No medicines found."})}),I.map(e=>{let s,t=(s=e.defaultDose?.trim()?e.defaultDose:"—",{dose:s,freq:e.defaultFrequency?.trim()?e.defaultFrequency:"—",dur:"number"==typeof e.defaultDuration?`${e.defaultDuration}d`:"—"}),i=Z(e);return(0,a.jsxs)("tr",{className:"align-top",children:[(0,a.jsxs)("td",{className:"px-5 py-4",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:e.displayName}),(0,a.jsxs)("div",{className:"mt-0.5 text-[11px] text-gray-500",children:["ID: ",e.id]}),i?(0,a.jsx)("div",{className:"mt-1 text-[11px] font-medium text-emerald-700",children:"Yours"}):null]}),(0,a.jsxs)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:[(0,a.jsxs)("div",{children:["Dose: ",t.dose]}),(0,a.jsxs)("div",{children:["Freq: ",t.freq]}),(0,a.jsxs)("div",{children:["Dur: ",t.dur]})]}),(0,a.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:e.source}),(0,a.jsx)("td",{className:"px-5 py-4",children:(0,a.jsx)(r.Badge,{className:"rounded-full text-[10px]",variant:"secondary",children:e.verified?"Verified":"Unverified"})}),(0,a.jsx)("td",{className:"px-5 py-4",children:(0,a.jsx)("div",{className:"flex justify-end gap-2",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Button,{variant:"secondary",className:"h-9 rounded-xl",onClick:()=>{let a,s;return _(e),a=e.defaultFrequency&&j(e.defaultFrequency)?e.defaultFrequency:"",s=e.form&&N(e.form)?e.form:"",void(J({displayName:e.displayName??"",defaultDose:e.defaultDose??"",defaultFrequency:a,defaultDuration:e.defaultDuration,form:s}),Y(!0))},disabled:X,children:[(0,a.jsx)(c.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(l.Button,{variant:"destructive",className:"h-9 rounded-xl",onClick:()=>es(e),disabled:X,children:[(0,a.jsx)(o.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[11px] text-gray-500",children:[(0,a.jsx)(h,{className:"h-4 w-4"}),"Read only"]})})})]},e.id)})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t px-5 py-3",children:[(0,a.jsx)(l.Button,{variant:"secondary",className:"h-9 rounded-xl",disabled:!A,onClick:()=>{q(e=>{let a=[...e];return L(a.pop()??null),a})},children:"Prev"}),(0,a.jsx)(l.Button,{variant:"secondary",className:"h-9 rounded-xl",disabled:!O,onClick:()=>{B&&(q(e=>[...e,S??""]),L(B))},children:"Next"})]})]}),(0,a.jsx)(n.Dialog,{open:z,onOpenChange:Q,children:(0,a.jsxs)(n.DialogContent,{className:"max-w-xl rounded-2xl",children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsx)(n.DialogTitle,{children:"Add medicine"}),(0,a.jsx)(n.DialogDescription,{children:"Create a medicine preset (this will be yours)."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-2",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Display name"}),(0,a.jsx)(i.Input,{className:"rounded-xl",placeholder:"e.g., Amoxicillin 500mg",value:G.displayName,onChange:e=>K(a=>({...a,displayName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Dose"}),(0,a.jsx)(i.Input,{className:"rounded-xl",placeholder:"e.g., 1 tab",value:G.defaultDose??"",onChange:e=>K(a=>({...a,defaultDose:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Frequency"}),(0,a.jsx)(b,{value:G.defaultFrequency??"",onChange:e=>K(a=>({...a,defaultFrequency:j(e)?e:""})),placeholder:"Select…",children:g.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Duration (days)"}),(0,a.jsx)(i.Input,{className:"rounded-xl",inputMode:"numeric",placeholder:"e.g., 5",value:"number"==typeof G.defaultDuration?String(G.defaultDuration):"",onChange:e=>K(a=>({...a,defaultDuration:y(e.target.value)}))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Form (optional)"}),(0,a.jsx)(b,{value:G.form??"",onChange:e=>K(a=>({...a,form:N(e)?e:""})),placeholder:"Select…",children:f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)(n.DialogFooter,{className:"gap-2",children:[(0,a.jsx)(l.Button,{variant:"secondary",className:"rounded-xl",onClick:()=>Q(!1),children:"Cancel"}),(0,a.jsx)(l.Button,{className:"rounded-xl",onClick:ee,disabled:!G.displayName.trim(),children:"Add"})]})]})}),(0,a.jsx)(n.Dialog,{open:V,onOpenChange:Y,children:(0,a.jsxs)(n.DialogContent,{className:"max-w-xl rounded-2xl",children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsx)(n.DialogTitle,{children:"Edit medicine"}),(0,a.jsx)(n.DialogDescription,{children:"Update name and default values."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-2",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Display name"}),(0,a.jsx)(i.Input,{className:"rounded-xl",value:$.displayName,onChange:e=>J(a=>({...a,displayName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Dose"}),(0,a.jsx)(i.Input,{className:"rounded-xl",value:$.defaultDose??"",onChange:e=>J(a=>({...a,defaultDose:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Frequency"}),(0,a.jsx)(b,{value:$.defaultFrequency??"",onChange:e=>J(a=>({...a,defaultFrequency:j(e)?e:""})),placeholder:"Select…",children:g.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Duration (days)"}),(0,a.jsx)(i.Input,{className:"rounded-xl",inputMode:"numeric",value:"number"==typeof $.defaultDuration?String($.defaultDuration):"",onChange:e=>J(a=>({...a,defaultDuration:y(e.target.value)}))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(d.Label,{className:"text-xs",children:"Form (optional)"}),(0,a.jsx)(b,{value:$.form??"",onChange:e=>J(a=>({...a,form:N(e)?e:""})),placeholder:"Select…",children:f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)(n.DialogFooter,{className:"gap-2",children:[(0,a.jsx)(l.Button,{variant:"secondary",className:"rounded-xl",onClick:()=>{Y(!1),_(null)},children:"Cancel"}),(0,a.jsx)(l.Button,{className:"rounded-xl",onClick:ea,disabled:!$.displayName.trim(),children:"Save changes"})]})]})})]})}e.s(["default",()=>D],99809)}]);