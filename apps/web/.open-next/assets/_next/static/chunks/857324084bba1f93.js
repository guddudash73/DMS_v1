(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57154,e=>{"use strict";var t=e.i(43476);let s=["UL","UR","LL","LR"];function l({toothDetails:e,className:l}){let i=(e??[]).map(e=>({...e,toothNumbers:(e.toothNumbers??[]).map(e=>String(e).trim()).filter(Boolean),notes:e.notes?.trim()||void 0})),r=i.some(e=>(e.toothNumbers?.length??0)>0),n=i.some(e=>!!e.notes);if(!r&&!n)return null;let a=function(e){let t=new Map;for(let e of s)t.set(e,[]);for(let s of e){let e=function(e){let t=String(e??"").trim().toUpperCase();return"UL"===t||"UR"===t||"LL"===t||"LR"===t?t:null}(s.position);if(!e)continue;let l=t.get(e)??[];l.push(...(s.toothNumbers??[]).map(e=>String(e).trim()).filter(Boolean)),t.set(e,l)}for(let e of s){let s=Array.from(new Set(t.get(e)??[]));s.sort((e,t)=>e.localeCompare(t)),t.set(e,s)}return t}(i),d=Array.from(new Set(i.map(e=>e.notes).filter(Boolean))),c=1===d.length?d[0]:null;return(0,t.jsxs)("div",{className:["flex items-start gap-3",l??""].join(" "),children:[(0,t.jsx)("div",{className:"relative shrink-0",children:(0,t.jsxs)("div",{className:"grid h-11 w-20.5 grid-cols-2 rounded-md bg-white overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-center justify-center border-b border-r border-gray-700 px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(a.get("UL")??[]).join(", ")||"—"})}),(0,t.jsx)("div",{className:"flex items-center justify-center border-b border-gray-700 px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(a.get("UR")??[]).join(", ")||"—"})}),(0,t.jsx)("div",{className:"flex items-center justify-center border-r border-gray-700 px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(a.get("LL")??[]).join(", ")||"—"})}),(0,t.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(a.get("LR")??[]).join(", ")||"—"})})]})}),(0,t.jsx)("div",{className:"min-w-0 flex-1",children:c?(0,t.jsx)("div",{className:"truncate text-[12px] font-semibold text-gray-900",children:c}):d.length?(0,t.jsx)("div",{className:"space-y-1",children:d.map((e,s)=>(0,t.jsx)("div",{className:"truncate text-[12px] font-semibold text-gray-900",children:e},s))}):(0,t.jsx)("div",{className:"text-[12px] text-gray-500",children:"—"})})]})}e.s(["ToothDetailsBlock",()=>l])},85449,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(57688),i=e.i(32595),r=e.i(70931),n=e.i(57154);let a={QD:"Once Daily",BID:"Twice Daily",TID:"Thrice Daily",QID:"Four Times Daily",HS:"At Bedtime",PRN:"As Needed"},d={BEFORE_MEAL:"before food",AFTER_MEAL:"After food",ANY:""};function c(e){let t=[],s=[e.medicine,e.dose].filter(Boolean).join(" ").trim();s&&t.push(s);let l=[e.frequency?`${e.frequency}(${a[e.frequency]})`:"",e.timing?d[e.timing]:""].filter(Boolean).join(" ").trim();return l&&t.push(`- ${l}`),"number"==typeof e.duration&&e.duration>0&&t.push(`For ${e.duration} days.`),e.notes?.trim()&&t.push(e.notes.trim()),t.join(" ")}function o(e,t){if("object"==typeof e&&null!==e)return e[t]}function x(e,t){let s=o(e,t);if(null!=s){if("string"==typeof s)return s;if("number"==typeof s||"boolean"==typeof s)return String(s)}}function m(e){if(!e)return;let t=function(e,t){for(let s of t){let t=o(e,s);if(void 0!==t)return t}}(e,["opdNo","opdNumber","opdId","opd","opd_no","opd_no_str"]);if(null!=t)return String(t).trim()||void 0}function h(e){let{visitId:s,isCurrent:l,currentLines:a,visit:d,showOpdInline:o,opdInlineText:m,currentToothDetails:h}=e,u=(0,r.useGetVisitRxQuery)({visitId:s},{skip:l||!s}),f=l?a:u.data?.rx?.lines??[],g=l?h:u.data?.rx?.toothDetails??[],p=x(d,"visitDate"),j=x(d,"reason"),v=(g?.length??0)>0;return f.length||j||p||v?(0,t.jsxs)("div",{className:"rx-prev-block",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-baseline justify-between",children:[(0,t.jsx)("div",{className:"text-[12px] font-bold text-gray-900",children:p?(0,i.formatClinicDateShort)(p):"—"}),(0,t.jsxs)("div",{className:"ml-4 flex min-w-0 flex-1 items-baseline justify-end gap-3",children:[(0,t.jsx)("div",{className:"min-w-0 flex-1 truncate text-right text-[11px] font-medium text-gray-700",children:j?.trim()?j.trim():""}),o&&m?(0,t.jsx)("div",{className:"shrink-0 text-right text-[11px] font-semibold text-gray-900",children:m}):null]})]}),v?(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(n.ToothDetailsBlock,{toothDetails:g})}):null,0===f.length?(0,t.jsx)("div",{className:"text-[12px] text-gray-500",children:"No medicines recorded."}):(0,t.jsx)("ol",{className:"space-y-1 text-[13px] leading-5 text-gray-900",children:f.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"w-5 shrink-0 text-right font-medium",children:[s+1,"."]}),(0,t.jsx)("div",{className:"font-medium",children:c(e)})]},s))}),(0,t.jsx)("div",{className:"mt-3 h-px w-full bg-gray-200"})]}):(0,t.jsx)("div",{className:"h-2"})}function u(e){let{page:s,total:l,onChange:i}=e;if(l<=1)return null;let r=(e,t)=>["h-8 min-w-8 rounded-lg border px-2 text-xs font-semibold transition",t?"opacity-50 cursor-not-allowed":"",e?"bg-black text-white border-black":"bg-white text-gray-800 hover:bg-gray-50"].join(" ");return(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:r(!1,s<=1),onClick:()=>i(Math.max(1,s-1)),disabled:s<=1,children:"Prev"}),Array.from({length:l},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{type:"button",className:r(e===s),onClick:()=>i(e),title:`Page ${e}`,children:e},e)),(0,t.jsx)("button",{type:"button",className:r(!1,s>=l),onClick:()=>i(Math.min(l,s+1)),disabled:s>=l,children:"Next"})]})}function f({patientName:e,patientPhone:r,patientAge:a,patientSex:d,sdId:o,opdNo:x,visitDateLabel:f,lines:g,receptionNotes:p,currentVisitId:j,chainVisitIds:v,visitMetaMap:N,toothDetails:y,currentOnly:b=!1}){let w,S,R=!!p?.trim(),M=(w="number"==typeof a?Number.isFinite(a)&&a>0?String(a):"":(a??"").toString().trim(),S=(d??"").toString().trim().toUpperCase(),w||S?w&&S?`${w}/${S}`:w||S||"—":"—"),D=(0,s.useMemo)(()=>(function(e){if(!e)return null;let t=e.trim().startsWith("Visit:")?e.replace("Visit:","").trim():e.trim();return/^\d{4}-\d{2}-\d{2}$/.test(t)?t:null})(f)??(0,i.clinicDateISO)(new Date),[f]),k=(0,s.useMemo)(()=>j??"CURRENT",[j]),A=(0,s.useMemo)(()=>{let e=(v&&v.length?[...v]:[k]).filter(Boolean);k&&!e.includes(k)&&e.push(k);let t=new Set;return e.filter(e=>!t.has(e)&&(t.add(e),!0))},[v,k]),C=(0,s.useMemo)(()=>N??new Map,[N]),B=!!j&&!!v&&v.length>0&&!!N,T=(0,s.useMemo)(()=>{if(B)return A[0]},[B,A]),L=(0,s.useMemo)(()=>{if(B&&T){let e=m(C.get(T));if(e)return e}return x??"—"},[B,T,C,x]),E=Math.round(225720/210),F=(0,s.useRef)(null),[I,U]=(0,s.useState)(1);(0,s.useEffect)(()=>{let e=F.current;if(!e)return;let t=new ResizeObserver(e=>{let t=Math.min(1,(e[0]?.contentRect?.width??760)/760);U(Number.isFinite(t)&&t>0?t:1)});return t.observe(e),()=>t.disconnect()},[]);let P=(0,s.useMemo)(()=>y??[],[y]),O=!B&&P.length>0,$=(0,s.useRef)(null),V=(0,s.useRef)(null),q=(0,s.useRef)(null),_=(0,s.useRef)(null),[z,H]=(0,s.useState)([]),[Q,W]=(0,s.useState)(560),[K,G]=(0,s.useState)(980),[X,Y]=(0,s.useState)(0),[J,Z]=(0,s.useState)([A]),[ee,et]=(0,s.useState)(1),es=(0,s.useMemo)(()=>[B?"H":"N",A.join(","),String(g.length),String(P.length),String(p?.length??0)].join("|"),[B,A,g.length,P.length,p]),el=B&&A.length>1;(0,s.useEffect)(()=>{b||et(1)},[b,B,A.join("|")]),(0,s.useEffect)(()=>{if(!el)return void Z([A]);let e=$.current;if(!e)return;let t=()=>{if(V.current){let e=V.current.getBoundingClientRect().height;Number.isFinite(e)&&e>0&&W(Math.floor(e))}if(q.current){let e=q.current.getBoundingClientRect().height;Number.isFinite(e)&&e>0&&G(Math.floor(e))}if(_.current){let e=_.current.getBoundingClientRect().height;Y(Number.isFinite(e)&&e>0?Math.ceil(e):0)}H(Array.from(e.querySelectorAll('[data-rx-block="1"]')).map(e=>{let t=Math.ceil(e.getBoundingClientRect().height),s=window.getComputedStyle(e);return Math.ceil(t+(Number.parseFloat(s.marginTop||"0")||0)+(Number.parseFloat(s.marginBottom||"0")||0))}))};t(),requestAnimationFrame(()=>t()),document.fonts?.ready&&document.fonts.ready.then(()=>requestAnimationFrame(()=>t()));let s=new ResizeObserver(()=>t());return s.observe(e),()=>s.disconnect()},[el,es]),(0,s.useEffect)(()=>{if(!B||!el||!z.length||z.length!==A.length)return void Z([A]);let e=[];{let t=[],s=0,l=Q;for(let i=0;i<A.length;i++){let r=A[i],n=z[i]??0;t.length>0&&s+n>l-10&&(e.push(t),t=[],s=0,l=K),t.push(r),s+=n}t.length&&e.push(t),e.length||(e=[A])}let t=e=>{let t=A.indexOf(e);return t>=0?z[t]??0:0},s=e=>e.reduce((e,s)=>e+t(s),0);for(let l=0;l<3;l++){for(let l=0;l<e.length-1;l++){let i=0===l?Q:K;for(;e[l+1].length>0;){let r=e[l+1][0],n=t(r);if(s(e[l])+n<=i-10)e[l].push(r),e[l+1].shift();else break}}(e=e.filter(e=>e.length>0)).length||(e=[A])}if(R&&X>0&&e.length>0){let t=e.length-1,l=(0===t?Q:K)-X;if(s(e[t])>l-10&&e[t].length>1){let s=e[t].pop();s&&e.push([s])}}Z(e)},[B,el,A,z,Q,K,R,X]),(0,s.useEffect)(()=>{if(!B||!b||!J.length)return;let e=J.findIndex(e=>e.includes(k));e>=0&&et(e+1)},[b,B,J,k]),(0,s.useEffect)(()=>{let e=J.length||1;ee>e&&et(e),ee<1&&et(1)},[J.length,ee]);let ei=J.length||1,er=J[Math.max(0,ee-1)]??A,en=b?{visibility:"hidden"}:void 0,ea=()=>R?(0,t.jsx)("div",{className:"shrink-0 px-6 pb-2",children:(0,t.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-gray-50 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-[10px] font-semibold text-gray-700",children:"Reception Notes"}),(0,t.jsx)("div",{className:"mt-1 whitespace-pre-wrap text-[10px] leading-4 text-gray-900",children:p})]})}):null,ed=R&&ee===ei&&!b,ec=1===ee,eo=e=>(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>{let s=C.get(e),l=null!=T&&e===T,i=l?void 0:m(s),r=e===k;return(0,t.jsx)("div",{"data-rx-block":"1",style:b&&!r?{visibility:"hidden"}:void 0,children:(0,t.jsx)(h,{visitId:"CURRENT"===e?"":e,isCurrent:r,currentLines:g,visit:s,showOpdInline:!l,opdInlineText:i,currentToothDetails:P})},e)})}),ex=el?(0,t.jsx)("div",{"aria-hidden":"true",className:"pointer-events-none fixed left-0 top-0",style:{width:0,height:0,overflow:"hidden",opacity:0},children:(0,t.jsx)("div",{style:{width:760},children:(0,t.jsxs)("div",{ref:$,className:"w-full",children:[(0,t.jsx)("div",{className:"h-[1080px] w-full overflow-hidden border bg-white",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-4",children:[(0,t.jsx)("div",{className:"h-16 w-full"}),(0,t.jsx)("div",{className:"mt-2 h-px w-full"})]}),(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-3",children:[(0,t.jsx)("div",{className:"h-24 w-full"}),(0,t.jsx)("div",{className:"mt-3 h-px w-full"})]}),(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-4 pb-4",children:(0,t.jsx)("div",{ref:V,className:"h-full w-full"})}),(0,t.jsx)("div",{className:"shrink-0 px-6 pb-2",children:(0,t.jsx)("div",{ref:_,className:"w-full",children:ea()})})]})}),(0,t.jsx)("div",{className:"mt-8 h-[1080px] w-full overflow-hidden border bg-white",children:(0,t.jsx)("div",{className:"flex h-full flex-col",children:(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-6 pb-4",children:(0,t.jsx)("div",{ref:q,className:"h-full w-full"})})})}),(0,t.jsx)("div",{className:"mt-8 px-6 pt-4",children:eo(A)})]})})}):null;return(0,t.jsxs)("div",{className:"w-full",children:[ex,(0,t.jsxs)("div",{ref:F,className:"w-full",children:[(0,t.jsx)("div",{className:"relative w-full",style:{height:Math.ceil(E*I)},children:(0,t.jsx)("div",{className:"origin-top-left",style:{width:760,height:E,transform:`scale(${I})`},children:(0,t.jsx)("div",{className:"h-full w-full overflow-hidden rounded-xl border bg-white shadow-sm",children:ec?(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-4",style:en,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsx)("div",{className:"relative h-16 w-16",children:(0,t.jsx)(l.default,{src:"/rx-logo-r.png",alt:"Rx Logo",fill:!0,className:"object-contain",priority:!0,unoptimized:!0})}),(0,t.jsxs)("div",{className:"mt-1 flex w-full flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"text-[10px] font-semibold tracking-[0.30em] text-emerald-600",children:"CONTACT"}),(0,t.jsx)("div",{className:"text-[12px] font-semibold text-gray-900",children:"9938942846"}),(0,t.jsx)("div",{className:"mt-1 max-w-130 text-[9px] font-medium leading-4 text-gray-700",children:"A-33, STALWART COMPLEX, UNIT - IV, BHUBANESWAR"}),(0,t.jsx)("div",{className:"max-w-130 text-[9px] font-medium leading-4 text-red-400 uppercase",children:"Clinic hours: 10 : 00 AM - 01 : 30 PM & 06 : 00 PM - 08:00 PM, Sunday Closed"})]}),(0,t.jsx)("div",{className:"relative h-14 w-38",children:(0,t.jsx)(l.default,{src:"/dashboard-logo.png",alt:"Sarangi Dentistry",fill:!0,className:"object-contain",priority:!0,unoptimized:!0})})]}),(0,t.jsx)("div",{className:"mt-2 h-px w-full bg-emerald-600/60"})]}),(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-3",style:en,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,t.jsxs)("div",{className:"min-w-0 flex flex-col",children:[(0,t.jsx)("div",{className:"text-[0.8rem] font-bold text-gray-900",children:"Dr. Soumendra Sarangi"}),(0,t.jsx)("div",{className:"mt-0 text-[0.7rem] font-light text-gray-700",children:"B.D.S. Regd. - 68"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex flex-col items-end text-right",children:[(0,t.jsx)("div",{className:"text-[0.8rem] font-bold text-gray-900",children:"Dr. Vaishnovee Sarangi"}),(0,t.jsx)("div",{className:"mt-0 text-[0.7rem] font-light text-gray-700",children:"B.D.S. Redg. - 3057"})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex w-full justify-between gap-6",children:[(0,t.jsxs)("div",{className:"space-y-0.5 text-[0.8rem] text-gray-800",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Patient Name"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:e??"—"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Contact No."}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:r??"—"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Age/Sex"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:M})]})]}),(0,t.jsxs)("div",{className:"w-[320px] justify-start space-y-0 text-[0.8rem]",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Regd. Date"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:D})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"SD. ID"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:o??"—"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"OPD. No"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:L})]})]})]}),(0,t.jsx)("div",{className:"mt-3 h-px w-full bg-gray-900/30"})]}),(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-4 pb-4",children:B?eo(er):(0,t.jsxs)(t.Fragment,{children:[O?(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)(n.ToothDetailsBlock,{toothDetails:P}),(0,t.jsx)("div",{className:"mt-3 h-px w-full bg-gray-200"})]}):null,0===g.length?(0,t.jsx)("div",{className:"text-[13px] text-gray-500",children:"No medicines added yet."}):(0,t.jsx)("ol",{className:"text-sm leading-6 text-gray-900",children:g.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-1",children:[(0,t.jsxs)("div",{className:"w-4 shrink-0 text-right font-medium",children:[s+1,"."]}),(0,t.jsx)("div",{className:"font-medium",children:c(e)})]},s))})]})}),ed?ea():null]}):(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-6 pb-4",children:B?eo(er):null}),ed?ea():null]})})})}),B&&!b?(0,t.jsx)(u,{page:ee,total:ei,onChange:et}):null]})]})}e.s(["PrescriptionPreview",()=>f])},89181,e=>{e.n(e.i(85449))}]);