(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23621,e=>{"use strict";var s=e.i(43476),t=e.i(91918),a=e.i(25913),r=e.i(52236);let i=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,asChild:l=!1,...n}){let c=l?t.Slot:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),e),...n})}e.s(["Badge",()=>l])},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},20286,e=>{"use strict";let s=(0,e.i(75254).default)("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);e.s(["Stethoscope",()=>s],20286)},28479,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(52236),i=e.i(70317),l=e.i(66691),n=e.i(23621),c=e.i(14650),d=e.i(24911),o=e.i(71689),m=e.i(55436),x=e.i(3116),u=e.i(20286),h=e.i(70931),g=e.i(50106),p=e.i(32595);let v={N:{label:"N",className:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"},F:{label:"F",className:"bg-pink-50 text-pink-700 ring-1 ring-pink-200"},O:{label:"O",className:"bg-slate-50 text-slate-700 ring-1 ring-slate-200"}},f={QUEUED:"Waiting",IN_PROGRESS:"On-chair",DONE:"Done"},N={QUEUED:"bg-pink-500",IN_PROGRESS:"bg-amber-400",DONE:"bg-emerald-500"};function b(e){return"object"==typeof e&&null!==e}function y(){let e=(0,a.useRouter)(),y=(0,a.useParams)(),j=y?.date,w=(0,g.useAuth)(),k="authenticated"===w.status&&!!w.accessToken,A=(0,h.useGetDailyVisitsBreakdownQuery)(j,{skip:!k||!j}),[E,C]=t.useState(""),[S,O]=t.useState("ALL"),L=t.useMemo(()=>{let e=A.data,s=(()=>b(e)&&Array.isArray(e.items)?(e.items??[]).slice():b(e)&&Array.isArray(e.doctors)?(e.doctors??[]).flatMap(e=>(e.items??[]).map(s=>({...s,doctorName:s.doctorName??e.doctorName??"Clinic"}))):[])().map(e=>{let s;return{visitId:e.visitId,patientName:e.patientName??"—",doctorName:e.doctorName??"Clinic",status:e.status??"QUEUED",tag:"N"===(s=String(e.tag??"").trim().toUpperCase())?"N":"F"===s?"F":"O",zeroBilled:!0===e.zeroBilled||void 0,createdAt:e.createdAt,billingAmount:e.billingAmount}});return s.sort((e,s)=>(s.createdAt??0)-(e.createdAt??0)),s},[A.data]),U=t.useMemo(()=>{let e=E.trim().toLowerCase();return L.filter(s=>("ALL"===S||s.status===S)&&(!e||s.patientName.toLowerCase().includes(e)||s.doctorName.toLowerCase().includes(e)))},[L,E,S]),B=t.useMemo(()=>{let e={QUEUED:[],IN_PROGRESS:[],DONE:[]};for(let s of U)e[s.status].push(s);return Object.keys(e).forEach(s=>{e[s].sort((e,s)=>(s.createdAt??0)-(e.createdAt??0))}),e},[U]),D=L.length;return(0,s.jsx)("section",{className:"h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:(0,s.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-300 flex-col gap-4",children:[(0,s.jsx)(i.Card,{className:"rounded-2xl border-none bg-white p-4 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl cursor-pointer",onClick:()=>e.back(),title:"Back",children:(0,s.jsx)(o.ArrowLeft,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h1",{className:"truncate text-lg font-semibold text-gray-900",children:"Visits"}),(0,s.jsx)(n.Badge,{variant:"secondary",className:"rounded-full",children:j})]}),(0,s.jsx)("div",{className:"mt-0.5 text-[12px] text-gray-500",children:A.isFetching||A.isLoading?"Loading…":`${D} total visits`})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-70",children:[(0,s.jsx)(m.Search,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,s.jsx)(d.Input,{value:E,onChange:e=>C(e.target.value),placeholder:"Search patient or doctor…",className:"h-10 rounded-xl pl-9"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["ALL","QUEUED","IN_PROGRESS","DONE"].map(e=>(0,s.jsx)(l.Button,{type:"button",variant:S===e?"default":"secondary",className:(0,r.cn)("h-10 rounded-xl px-3 text-[12px] cursor-pointer",S!==e&&"bg-gray-50"),onClick:()=>O(e),children:"ALL"===e?"All":"IN_PROGRESS"===e?"On-chair":"QUEUED"===e?"Waiting":"Done"},e))})]})]})}),(0,s.jsx)("div",{className:"flex-1",children:k?A.isLoading?(0,s.jsx)(i.Card,{className:"rounded-2xl border-none bg-white p-4 shadow-sm",children:(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:8}).map((e,t)=>(0,s.jsx)("div",{className:"h-14 w-full rounded-2xl bg-gray-100"},t))})}):0===U.length?(0,s.jsxs)(i.Card,{className:"rounded-2xl border-none bg-white p-6 shadow-sm",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"No visits match your filters."}),(0,s.jsx)("div",{className:"mt-1 text-sm text-gray-500",children:"Try clearing search or selecting “All”."})]}):(0,s.jsx)("div",{className:"space-y-4",children:Object.keys(B).map(t=>{let a=B[t];return 0===a.length?null:(0,s.jsxs)(i.Card,{className:"rounded-2xl border-none bg-white p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:(0,r.cn)("h-2.5 w-2.5 rounded-full",N[t])}),(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:f[t]})]}),(0,s.jsx)(n.Badge,{variant:"secondary",className:"rounded-full",children:a.length})]}),(0,s.jsx)("ul",{className:"space-y-2",children:a.map(t=>{var a;let i,l=v[t.tag],d=(a=t.createdAt)?(0,p.formatClinicTimeFromMs)(a):"";return(0,s.jsx)("li",{children:(0,s.jsx)("button",{type:"button",onClick:()=>{let s;return s=t.visitId,e.push(`/visits/${s}`)},className:(0,r.cn)("w-full rounded-2xl px-3 py-3 text-left cursor-pointer","transition-colors hover:bg-gray-50","focus:outline-none focus-visible:ring-2 focus-visible:ring-black/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex min-w-0 items-center gap-3",children:[(0,s.jsx)(c.Avatar,{className:"h-10 w-10",children:(0,s.jsx)(c.AvatarFallback,{className:"bg-gray-100 text-gray-800",children:(i=t.patientName.trim().split(/\s+/).filter(Boolean),(((i[0]?.[0]??"")+(i[1]?.[0]??i[0]?.[1]??"")).slice(0,2).toUpperCase()||"P").trim())})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"truncate text-[14px] font-semibold text-gray-900",children:t.patientName}),(0,s.jsx)(n.Badge,{variant:"secondary",className:(0,r.cn)("h-5 rounded-full px-2 text-[10px] font-semibold",l.className),children:l.label}),t.zeroBilled?(0,s.jsx)(n.Badge,{variant:"secondary",className:(0,r.cn)("h-5 rounded-full px-2 text-[10px] font-semibold","bg-amber-50 text-amber-800 ring-1 ring-amber-200"),children:"Z"}):null]}),(0,s.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-x-3 gap-y-1 text-[12px] text-gray-500",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(u.Stethoscope,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"truncate",children:t.doctorName})]}),d?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(x.Clock,{className:"h-4 w-4"}),d]}):null]})]})]}),(0,s.jsxs)("div",{className:"shrink-0 text-[12px] text-gray-500",children:["#",t.visitId.slice(0,6)]})]})})},t.visitId)})})]},t)})}):(0,s.jsx)(i.Card,{className:"rounded-2xl border-none bg-white p-4 shadow-sm",children:(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Please login to see visits."})})})]})})}e.s(["default",()=>y])}]);