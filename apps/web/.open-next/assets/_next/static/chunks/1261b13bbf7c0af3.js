(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46349,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},23621,e=>{"use strict";var t=e.i(43476),s=e.i(91918),a=e.i(25913),i=e.i(52236);let l=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,asChild:n=!1,...r}){let d=n?s.Slot:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(l({variant:a}),e),...r})}e.s(["Badge",()=>n])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},32189,(e,t,s)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},65156,(e,t,s)=>{"use strict";var a=e.r(32189);function i(){}function l(){}l.resetWarningCache=i,t.exports=function(){function e(e,t,s,i,l,n){if(n!==a){var r=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:i};return s.PropTypes=s,s}},45009,(e,t,s)=>{t.exports=e.r(65156)()},54688,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(55487),l=e.i(70317),n=e.i(50106),r=e.i(32595),d=e.i(70931);let c={QUEUED:"bg-pink-400",IN_PROGRESS:"bg-amber-400",DONE:"bg-emerald-500"};function o(e){return"QUEUED"===e?"No patients waiting.":"IN_PROGRESS"===e?"No visits in progress.":"No completed visits yet."}function x(e){return"object"==typeof e&&null!==e}function m(){return(0,t.jsx)("span",{className:"ml-1.5 inline-flex items-center rounded border border-gray-200 bg-gray-100 px-1.5 py-px text-[9px] font-medium leading-none text-gray-600",title:"Offline visit",children:"OFF"})}function u({label:e,status:s,onClick:a,onPrefetch:i,isOffline:l,dailyPatientNumber:n}){return(0,t.jsxs)("button",{type:"button",onClick:a,onPointerEnter:i,onPointerDown:i,className:"flex h-10 w-full cursor-pointer items-center justify-between rounded-xl bg-white px-3 text-left text-xs text-gray-800 shadow-[0_0_0_1px_rgba(0,0,0,0.04)] transition hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-black/10",title:"Open visit",children:[(0,t.jsxs)("span",{className:"min-w-0 truncate font-medium",children:[(0,t.jsx)("span",{className:"mr-2 inline-flex h-6 min-w-11 items-center justify-center rounded-lg border bg-gray-50 px-2 text-[11px] font-semibold text-gray-700",children:n?`#${n}`:"—"}),e,l?(0,t.jsx)(m,{}):null]}),(0,t.jsx)("span",{className:`ml-2 inline-block h-2 w-2 shrink-0 rounded-full ${c[s]}`})]})}let g=({text:e})=>(0,t.jsx)("div",{className:"flex h-10 items-center rounded-xl bg-gray-50 px-3 text-[11px] text-gray-400",children:e});function p({onViewAll:e}){let c=(0,a.useRouter)(),m=(0,i.useDispatch)(),p=(0,n.useAuth)(),h="authenticated"===p.status&&!!p.accessToken,f=s.useMemo(()=>(0,r.clinicDateISO)(new Date),[]),b=(0,d.useGetPatientQueueQuery)({date:f},{skip:!h,selectFromResult:e=>({...e,items:e.data?.items??[],hasData:!!e.data})}),N=s.useCallback(e=>{let t,s=e.visitId;if(!s)return;c.prefetch(`/visits/${s}`),m(d.api.util.prefetch("getVisitById",s,{force:!1})),m(d.api.util.prefetch("getVisitRx",{visitId:s},{force:!1})),m(d.api.util.prefetch("getVisitRxVersions",{visitId:s},{force:!1}));let a="string"==typeof(t=e?.patientId??e.patientId)&&t.trim()?t.trim():null;a&&m(d.api.util.prefetch("getPatientById",a,{force:!1}))},[m,c]),y=s.useMemo(()=>b.items.filter(e=>"QUEUED"===e.status),[b.items]),v=s.useMemo(()=>b.items.filter(e=>"IN_PROGRESS"===e.status),[b.items]),j=s.useMemo(()=>b.items.filter(e=>"DONE"===e.status),[b.items]),w=b.isLoading&&!b.hasData,k=!!b.isError;return(0,t.jsxs)(l.Card,{className:"w-full rounded-2xl border-none bg-white px-4 pb-4 pt-2 shadow-sm",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Patient Queue"}),e?(0,t.jsx)("button",{type:"button",onClick:e,className:"rounded-full bg-gray-50 px-3 py-1 text-[11px] font-medium text-gray-800 transition hover:bg-black hover:text-white cursor-pointer",title:"View full queue",children:"View all"}):null]}),h?(0,t.jsx)("div",{className:"grid gap-8 md:grid-cols-3",children:[{status:"QUEUED",data:y},{status:"IN_PROGRESS",data:v},{status:"DONE",data:j}].map(e=>{var s;let a=("DONE"===e.status?[...e.data].sort((e,t)=>(t.createdAt??0)-(e.createdAt??0)):[...e.data].sort((e,t)=>(e.createdAt??0)-(t.createdAt??0))).slice(0,6);return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"QUEUED"===(s=e.status)?"WAITING":"IN_PROGRESS"===s?"IN_PROCESS":"DONE"}),(0,t.jsx)("div",{className:"space-y-2",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{text:"Couldn’t load."}),Array.from({length:5}).map((e,s)=>(0,t.jsx)(g,{text:"—"},`err-${s}`))]}):w?Array.from({length:6}).map((e,s)=>(0,t.jsx)(g,{text:"Loading…"},`load-${s}`)):0===a.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{text:o(e.status)}),Array.from({length:5}).map((e,s)=>(0,t.jsx)(g,{text:"—"},`empty-${s}`))]}):(0,t.jsxs)(t.Fragment,{children:[a.map(e=>{let s;return(0,t.jsx)(u,{label:(s=e.patientName?.trim())&&s.length>0?s:`Patient: ${e.patientId}`,status:e.status,onPrefetch:()=>N(e),onClick:()=>{let t;return t=e.visitId,c.push(`/visits/${t}`)},isOffline:x(e)&&!0===e.isOffline,dailyPatientNumber:function(e){if(!x(e))return null;let t=e.dailyPatientNumber;return"number"==typeof t&&Number.isFinite(t)&&t>=1?t:null}(e)},e.visitId)}),a.length<6?Array.from({length:6-a.length}).map((s,a)=>(0,t.jsx)(g,{text:0===a?o(e.status):"—"},`pad-${a}`)):null]})})]},e.status)})}):(0,t.jsx)("div",{className:"mt-2 rounded-xl bg-gray-50 px-3 py-3 text-[11px] text-gray-400",children:"Please log in to view the queue."}),b.isFetching&&b.hasData?(0,t.jsx)("div",{className:"mt-3 text-[10px] text-gray-400",children:"Syncing…"}):null]})}var h=e.i(66691),f=e.i(23621),b=e.i(71689);let N={DONE:"Completed",IN_PROGRESS:"On-chair",QUEUED:"Waiting"},y={DONE:"bg-emerald-50 text-emerald-700 border-emerald-200",IN_PROGRESS:"bg-amber-50 text-amber-700 border-amber-200",QUEUED:"bg-pink-50 text-pink-700 border-pink-200"};function v({v:e,onOpen:s}){let a=function(e){if("object"!=typeof e||null===e)return null;let t=e.dailyPatientNumber;return"number"==typeof t&&Number.isFinite(t)&&t>=1?t:null}(e);return(0,t.jsxs)("button",{type:"button",onClick:()=>s(e.visitId),className:"flex w-full items-center justify-between gap-3 cursor-pointer rounded-xl border bg-white px-4 py-3 text-left transition hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-black/10",title:"Open visit",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"truncate text-sm font-medium text-gray-900",children:[(0,t.jsx)("span",{className:"mr-2 inline-flex h-6 min-w-11 items-center justify-center rounded-lg border bg-gray-50 px-2 text-[11px] font-semibold text-gray-700",children:a?`#${a}`:"—"}),e.patientName||`Patient: ${e.patientId}`]}),(0,t.jsx)("div",{className:"mt-0.5 truncate text-[11px] text-gray-500",children:e.reason?e.reason:"—"})]}),(0,t.jsx)(f.Badge,{variant:"outline",className:`shrink-0 ${y[e.status]}`,children:N[e.status]})]})}function j({date:e,onBack:a}){let i=(0,n.useAuth)(),c="authenticated"===i.status&&!!i.accessToken,o=e??(0,r.clinicDateISO)(new Date),{data:x,isLoading:m,isFetching:u,isError:g}=(0,d.useGetPatientQueueQuery)({date:o},{skip:!c}),p=x?.items??[],f=s.useMemo(()=>{let e=p.filter(e=>"QUEUED"===e.status);return{queued:e,inProgress:p.filter(e=>"IN_PROGRESS"===e.status),done:p.filter(e=>"DONE"===e.status).slice().reverse()}},[p]),N=c&&(m||u),y=e=>{window.location.assign(`/visits/${e}`)};return(0,t.jsx)("section",{className:"h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:(0,t.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-300 flex-col gap-6 2xl:gap-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Today's Clinic Queue"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["All visits for ",o," (Waiting, On-chair, Completed)"]})]}),(0,t.jsxs)(h.Button,{type:"button",variant:"ghost",onClick:a,className:"h-9 rounded-full bg-gray-50 px-4 text-sm font-medium text-gray-800 hover:bg-black hover:text-white cursor-pointer",children:[(0,t.jsx)(b.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,t.jsxs)(l.Card,{className:"flex h-130 flex-col rounded-2xl border-none bg-white p-5 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between pb-3",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"Waiting"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-500",children:f.queued.length})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-3 overflow-y-auto pr-1",children:[!c&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Please log in to view queue."}),N&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Loading…"}),!N&&g&&(0,t.jsx)("div",{className:"text-sm text-red-500",children:"Couldn't load queue."}),!N&&!g&&0===f.queued.length&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"No waiting visits."}),!N&&!g&&f.queued.map(e=>(0,t.jsx)(v,{v:e,onOpen:y},e.visitId))]})]}),(0,t.jsxs)(l.Card,{className:"flex h-130 flex-col rounded-2xl border-none bg-white p-5 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between pb-3",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"On-chair"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-500",children:f.inProgress.length})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-3 overflow-y-auto pr-1",children:[!c&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Please log in to view queue."}),N&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Loading…"}),!N&&g&&(0,t.jsx)("div",{className:"text-sm text-red-500",children:"Couldn't load queue."}),!N&&!g&&0===f.inProgress.length&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"No on-chair visits."}),!N&&!g&&f.inProgress.map(e=>(0,t.jsx)(v,{v:e,onOpen:y},e.visitId))]})]}),(0,t.jsxs)(l.Card,{className:"flex h-130 flex-col rounded-2xl border-none bg-white p-5 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between pb-3",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"Completed"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-500",children:f.done.length})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-3 overflow-y-auto pr-1",children:[!c&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Please log in to view queue."}),N&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Loading…"}),!N&&g&&(0,t.jsx)("div",{className:"text-sm text-red-500",children:"Couldn't load queue."}),!N&&!g&&0===f.done.length&&(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"No completed visits yet."}),!N&&!g&&f.done.map(e=>(0,t.jsx)(v,{v:e,onOpen:y},e.visitId))]})]})]})]})})}var w=e.i(21806),k=e.i(52236),P=e.i(14650),O=e.i(78583),E=e.i(3281),I=e.i(46349),I=I;let D={N:{label:"N",className:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"},F:{label:"F",className:"bg-pink-50 text-pink-700 ring-1 ring-pink-200"}},C={DONE:{dotClass:"bg-emerald-500",label:"Done"},IN_PROGRESS:{dotClass:"bg-amber-400",label:"On-chair"},QUEUED:{dotClass:"bg-pink-500",label:"Waiting"}};function A({i:e}){return(0,t.jsx)("li",{className:"rounded-2xl px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-full bg-gray-100"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"h-3 w-40 rounded bg-gray-100"}),(0,t.jsx)("div",{className:"h-3 w-28 rounded bg-gray-100"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-xl bg-gray-100"}),(0,t.jsx)("div",{className:"h-8 w-8 rounded-xl bg-gray-100"})]})]})},`sk-${e}`)}function S({label:e,i:s}){return(0,t.jsx)("li",{className:"rounded-2xl px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"h-9 w-9 rounded-full bg-gray-50 ring-1 ring-gray-200"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-[13px] font-semibold text-gray-300",children:e}),(0,t.jsx)("div",{className:"mt-0.5 text-[11px] text-gray-200",children:"—"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 opacity-30",children:[(0,t.jsx)("span",{className:"h-9 w-9 rounded-xl bg-gray-50 ring-1 ring-gray-200"}),(0,t.jsx)("span",{className:"h-9 w-9 rounded-xl bg-gray-50 ring-1 ring-gray-200"})]})]})},`ph-${s}`)}function R({p:e,onOpen:s}){let a,i=C[e.status],l=D[e.tag],n="number"==typeof e.billingAmount&&!Number.isNaN(e.billingAmount),r="DONE"===e.status,d=function(e){if(e.zeroBilled)return!0;let t=e.visit??void 0;return!!(e.isZeroBilled||e.zero_billed||e.zeroBilledVisit||t?.zeroBilled)||!("number"!=typeof e.billingAmount||Number.isNaN(e.billingAmount))&&e.billingAmount<=0}(e);return(0,t.jsx)("li",{children:(0,t.jsx)("div",{role:"button",tabIndex:0,onClick:()=>s(e.visitId),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&s(e.visitId)},className:(0,k.cn)("group w-full rounded-2xl px-3 py-2","cursor-pointer select-none text-left","transition-colors hover:bg-gray-50","focus:outline-none focus-visible:ring-2 focus-visible:ring-black/10"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-3",children:[(0,t.jsx)(P.Avatar,{className:"h-9 w-9",children:e.avatarUrl?(0,t.jsx)(P.AvatarImage,{src:e.avatarUrl,alt:e.patientName}):(0,t.jsx)(P.AvatarFallback,{className:"bg-gray-100 text-gray-800",children:(a=e.patientName.trim().split(/\s+/).filter(Boolean),(((a[0]?.[0]??"")+(a[1]?.[0]??a[0]?.[1]??"")).slice(0,2).toUpperCase()||"P").trim())})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"truncate text-[13px] font-semibold text-gray-900",children:e.patientName}),(0,t.jsx)("span",{className:(0,k.cn)("h-2 w-2 shrink-0 rounded-full",i.dotClass),title:i.label})]}),(0,t.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-[11px] text-gray-500",children:[(0,t.jsx)("span",{className:"truncate",children:e.doctorName}),(0,t.jsx)(f.Badge,{variant:"secondary",className:(0,k.cn)("h-5 shrink-0 rounded-full px-2 text-[10px] font-semibold",l.className),title:"N"===e.tag?"New (N)":"Follow-up (F)",children:l.label}),d?(0,t.jsx)(f.Badge,{variant:"secondary",className:(0,k.cn)("h-5 shrink-0 rounded-full px-2 text-[10px] font-semibold","bg-zinc-50 text-zinc-700 ring-1 ring-zinc-200"),title:"Zero billed (Z)",children:"Z"}):null]})]})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[n?(0,t.jsx)(h.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl",title:"Checkout done - Print available",onClick:t=>{t.stopPropagation(),s(e.visitId)},children:(0,t.jsx)(E.Printer,{className:"h-4 w-4 text-gray-700"})}):(0,t.jsx)("span",{className:"h-9 w-9"}),r?(0,t.jsx)(h.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl",title:"Visit done - Documents available",onClick:t=>{t.stopPropagation(),s(e.visitId)},children:(0,t.jsx)(O.FileText,{className:"h-4 w-4 text-gray-700"})}):(0,t.jsx)("span",{className:"h-9 w-9"})]})]})})},e.visitId)}function U({title:e="Patients.",dateLabel:s,dateIso:i,patients:n=[],loading:d=!1,canUseApi:c=!0}){let o=(0,a.useRouter)(),x=e=>{o.push(`/visits/${e}`)},m=n.slice(0,4),u=Math.max(0,4-m.length),g=n.length>4;return(0,t.jsxs)(l.Card,{className:"w-full rounded-2xl border-none bg-white pt-4 shadow-sm h-full",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 px-4 pb-2",children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e}),s?(0,t.jsx)("div",{className:"text-[11px] text-gray-500",children:s}):null]}),(0,t.jsxs)(h.Button,{type:"button",variant:"ghost",size:"sm",className:"h-8 rounded-xl px-2 text-[12px] text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:()=>{let e=i??(0,r.clinicDateISO)(new Date);o.push(`/visits/day/${e}`)},disabled:d||!c,title:"View all visits for this day",children:["View all",(0,t.jsx)(I.default,{className:"ml-1 h-4 w-4"})]})]}),(0,t.jsx)("div",{className:(0,k.cn)("px-2 pb-4",g?"max-h-67 overflow-y-auto dms-scroll":""),children:(0,t.jsxs)("ul",{className:"space-y-1",children:[d?Array.from({length:4}).map((e,s)=>(0,t.jsx)(A,{i:s},s)):c?(0,t.jsxs)(t.Fragment,{children:[m.map(e=>(0,t.jsx)(R,{p:e,onOpen:x},e.visitId)),Array.from({length:u}).map((e,s)=>(0,t.jsx)(S,{i:s,label:"Patients"},`ph-${s}`))]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"px-3 py-3",children:(0,t.jsx)("div",{className:"rounded-2xl bg-gray-50 px-3 py-3 text-xs text-gray-500",children:"Please login to see patients."})}),Array.from({length:3}).map((e,s)=>(0,t.jsx)(S,{i:s,label:"Patients"},s))]}),!d&&c&&n.length>4?n.slice(4).map(e=>(0,t.jsx)(R,{p:e,onOpen:x},e.visitId)):null]})})]})}function _({date:e}){let a=(0,n.useAuth)(),i=e??(0,r.clinicDateISO)(new Date),c="authenticated"===a.status&&!!a.accessToken,{data:o,isLoading:x,isFetching:m,isError:u}=(0,d.useGetPatientQueueQuery)({date:i},{skip:!c}),g=o?.items??[],{completed:p,onChair:h,waiting:f,total:b}=s.useMemo(()=>{let e=0,t=0,s=0;for(let a of g)"QUEUED"===a.status?e+=1:"IN_PROGRESS"===a.status?t+=1:"DONE"===a.status&&(s+=1);return{completed:s,onChair:t,waiting:e,total:e+t+s}},[g]),N=x||m,y=e=>N?"…":e;return(0,t.jsxs)(l.Card,{className:"flex h-full flex-col rounded-2xl border border-none bg-white px-6 py-2 shadow-sm gap-2 2xl:justify-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold tracking-wide text-gray-400",children:"Queue Summary:"}),(0,t.jsxs)("div",{className:"mt-4 space-y-3 text-base",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"h-4 w-4 rounded-full bg-[#4ade80]"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["Completed: ",(0,t.jsx)("span",{className:"font-semibold",children:y(p)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"h-4 w-4 rounded-full bg-[#facc15]"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["On-Chair: ",(0,t.jsx)("span",{className:"font-semibold",children:y(h)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"h-4 w-4 rounded-full bg-[#f472b6]"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["Waiting: ",(0,t.jsx)("span",{className:"font-semibold",children:y(f)})]})]})]}),(0,t.jsx)("div",{className:"my-4 h-px w-full bg-gray-200"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-base",children:[(0,t.jsx)("span",{className:"h-4 w-4 rounded-full bg-gray-500"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["Total: ",(0,t.jsx)("span",{className:"font-semibold",children:y(b)})]})]}),u&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"Couldn't load today's queue summary."})]})}var B=e.i(14468);function T(e){let t="string"==typeof e.patientName&&e.patientName.trim().length>0?e.patientName.trim():`Patient: ${e.patientId}`,s="number"==typeof e.billingAmount?e.billingAmount:void 0,a=!!e.zeroBilled,i=!("number"!=typeof s||Number.isNaN(s))&&s<=0;return{visitId:e.visitId,patientName:t,doctorName:"Clinic",tag:"F"===e.tag?"F":"N",status:e.status,billingAmount:s,createdAt:"number"==typeof e.createdAt?e.createdAt:0,zeroBilled:a||i,dailyPatientNumber:"number"==typeof e.dailyPatientNumber?e.dailyPatientNumber:void 0}}function F(){let[e,a]=s.useState(null),[i,l]=s.useState(!1),c=(0,n.useAuth)(),o="authenticated"===c.status&&!!c.accessToken,x=s.useMemo(()=>(0,r.clinicDateISO)(new Date),[]),m=e??x,u=(0,d.useGetPatientQueueQuery)({date:m},{skip:!o}),g=s.useMemo(()=>{let e=(u.data?.items??[]).map(T).filter(e=>"string"==typeof e.visitId&&e.visitId.length>0);return e.sort((e,t)=>(t.createdAt??0)-(e.createdAt??0)),e},[u.data]);return e?(0,t.jsx)("section",{className:"h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:(0,t.jsxs)("div",{className:"mx-auto flex h-full w-full max-w-300 flex-col gap-6 2xl:gap-10",children:[(0,t.jsx)(w.default,{onDateSelect:e=>a(e)}),(0,t.jsx)(B.default,{date:e,onBack:()=>a(null)})]})}):i?(0,t.jsx)(j,{date:m,onBack:()=>l(!1)}):(0,t.jsx)("section",{className:"h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:(0,t.jsxs)("div",{className:"grid h-full grid-cols-1 gap-6 2xl:gap-10 lg:grid-cols-[minmax(0,2fr)_minmax(320px,0.9fr)]",children:[(0,t.jsx)("div",{className:"flex h-full flex-col gap-6",children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-1 gap-6 2xl:gap-10 lg:grid-cols-[minmax(0,2fr)]",children:[(0,t.jsx)(p,{onViewAll:()=>l(!0)}),(0,t.jsx)(w.default,{onDateSelect:e=>a(e)})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-6 2xl:gap-10",children:[(0,t.jsx)(U,{title:"Patients.",dateLabel:x===m?"Today":m,dateIso:m,patients:g,loading:u.isLoading||u.isFetching,canUseApi:o}),(0,t.jsx)(_,{date:m})]})]})})}e.s(["default",()=>F],54688)}]);