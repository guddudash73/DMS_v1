(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23621,e=>{"use strict";var t=e.i(43476),r=e.i(91918),n=e.i(25913),l=e.i(52236);let a=(0,n.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function s({className:e,variant:n,asChild:s=!1,...i}){let o=s?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,l.cn)(a({variant:n}),e),...i})}e.s(["Badge",()=>s])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},69262,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(81140),l=e.i(20783),a=e.i(26330),s=e.i(3536),i=e.i(65491),o=e.i(10772),d=e.i(53660),c=e.i(74606),u=e.i(96626);function m(e){var n;let a,s=(n=e,(a=r.forwardRef((e,t)=>{let{children:n,...a}=e;if(r.isValidElement(n)){var s;let e,i,o=(s=n,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),d=function(e,t){let r={...t};for(let n in t){let l=e[n],a=t[n];/^on[A-Z]/.test(n)?l&&a?r[n]=(...e)=>{let t=a(...e);return l(...e),t}:l&&(r[n]=l):"style"===n?r[n]={...l,...a}:"className"===n&&(r[n]=[l,a].filter(Boolean).join(" "))}return{...e,...r}}(a,n.props);return n.type!==r.Fragment&&(d.ref=t?(0,l.composeRefs)(t,o):o),r.cloneElement(n,d)}return r.Children.count(n)>1?r.Children.only(null):null})).displayName=`${n}.SlotClone`,a),i=r.forwardRef((e,n)=>{let{children:l,...a}=e,i=r.Children.toArray(l),o=i.find(f);if(o){let e=o.props.children,l=i.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(s,{...a,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,t.jsx)(s,{...a,ref:n,children:l})});return i.displayName=`${e}.Slot`,i}e.i(74080);var x=Symbol("radix.slottable");function f(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===x}var h=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{let l=m(`Primitive.${n}`),a=r.forwardRef((e,r)=>{let{asChild:a,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?l:n,{...s,ref:r})});return a.displayName=`Primitive.${n}`,{...e,[n]:a}},{}),p=e.i(69340),g=e.i(86312),v=e.i(85369),b="Popover",[y,j]=function(e,n=[]){let l=[],a=()=>{let t=l.map(e=>r.createContext(e));return function(n){let l=n?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...n,[e]:l}}),[n,l])}};return a.scopeName=e,[function(n,a){let s=r.createContext(a),i=l.length;l=[...l,a];let o=n=>{let{scope:l,children:a,...o}=n,d=l?.[e]?.[i]||s,c=r.useMemo(()=>o,Object.values(o));return(0,t.jsx)(d.Provider,{value:c,children:a})};return o.displayName=n+"Provider",[o,function(t,l){let o=l?.[e]?.[i]||s,d=r.useContext(o);if(d)return d;if(void 0!==a)return a;throw Error(`\`${t}\` must be used within \`${n}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let l=n.reduce((t,{useScope:r,scopeName:n})=>{let l=r(e)[`__scope${n}`];return{...t,...l}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}(a,...n)]}(b,[d.createPopperScope]),N=(0,d.createPopperScope)(),[w,k]=y(b),C=e=>{let{__scopePopover:n,children:l,open:a,defaultOpen:s,onOpenChange:i,modal:c=!1}=e,u=N(n),m=r.useRef(null),[x,f]=r.useState(!1),[h,g]=(0,p.useControllableState)({prop:a,defaultProp:s??!1,onChange:i,caller:b});return(0,t.jsx)(d.Root,{...u,children:(0,t.jsx)(w,{scope:n,contentId:(0,o.useId)(),triggerRef:m,open:h,onOpenChange:g,onOpenToggle:r.useCallback(()=>g(e=>!e),[g]),hasCustomAnchor:x,onCustomAnchorAdd:r.useCallback(()=>f(!0),[]),onCustomAnchorRemove:r.useCallback(()=>f(!1),[]),modal:c,children:l})})};C.displayName=b;var S="PopoverAnchor";r.forwardRef((e,n)=>{let{__scopePopover:l,...a}=e,s=k(S,l),i=N(l),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=s;return r.useEffect(()=>(o(),()=>c()),[o,c]),(0,t.jsx)(d.Anchor,{...i,...a,ref:n})}).displayName=S;var E="PopoverTrigger",R=r.forwardRef((e,r)=>{let{__scopePopover:a,...s}=e,i=k(E,a),o=N(a),c=(0,l.useComposedRefs)(r,i.triggerRef),u=(0,t.jsx)(h.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":z(i.open),...s,ref:c,onClick:(0,n.composeEventHandlers)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:(0,t.jsx)(d.Anchor,{asChild:!0,...o,children:u})});R.displayName=E;var A="PopoverPortal",[D,I]=y(A,{forceMount:void 0}),M=e=>{let{__scopePopover:r,forceMount:n,children:l,container:a}=e,s=k(A,r);return(0,t.jsx)(D,{scope:r,forceMount:n,children:(0,t.jsx)(u.Presence,{present:n||s.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:a,children:l})})})};M.displayName=A;var P="PopoverContent",_=r.forwardRef((e,r)=>{let n=I(P,e.__scopePopover),{forceMount:l=n.forceMount,...a}=e,s=k(P,e.__scopePopover);return(0,t.jsx)(u.Presence,{present:l||s.open,children:s.modal?(0,t.jsx)(T,{...a,ref:r}):(0,t.jsx)(L,{...a,ref:r})})});_.displayName=P;var F=m("PopoverContent.RemoveScroll"),T=r.forwardRef((e,a)=>{let s=k(P,e.__scopePopover),i=r.useRef(null),o=(0,l.useComposedRefs)(a,i),d=r.useRef(!1);return r.useEffect(()=>{let e=i.current;if(e)return(0,g.hideOthers)(e)},[]),(0,t.jsx)(v.RemoveScroll,{as:F,allowPinchZoom:!0,children:(0,t.jsx)(B,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),d.current||s.triggerRef.current?.focus()}),onPointerDownOutside:(0,n.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;d.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,n.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),L=r.forwardRef((e,n)=>{let l=k(P,e.__scopePopover),a=r.useRef(!1),s=r.useRef(!1);return(0,t.jsx)(B,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||l.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let r=t.target;l.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),B=r.forwardRef((e,r)=>{let{__scopePopover:n,trapFocus:l,onOpenAutoFocus:o,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:x,onFocusOutside:f,onInteractOutside:h,...p}=e,g=k(P,n),v=N(n);return(0,s.useFocusGuards)(),(0,t.jsx)(i.FocusScope,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:o,onUnmountAutoFocus:c,children:(0,t.jsx)(a.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:h,onEscapeKeyDown:m,onPointerDownOutside:x,onFocusOutside:f,onDismiss:()=>g.onOpenChange(!1),children:(0,t.jsx)(d.Content,{"data-state":z(g.open),role:"dialog",id:g.contentId,...v,...p,ref:r,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),O="PopoverClose";function z(e){return e?"open":"closed"}r.forwardRef((e,r)=>{let{__scopePopover:l,...a}=e,s=k(O,l);return(0,t.jsx)(h.button,{type:"button",...a,ref:r,onClick:(0,n.composeEventHandlers)(e.onClick,()=>s.onOpenChange(!1))})}).displayName=O,r.forwardRef((e,r)=>{let{__scopePopover:n,...l}=e,a=N(n);return(0,t.jsx)(d.Arrow,{...a,...l,ref:r})}).displayName="PopoverArrow";var q=e.i(52236);function $({...e}){return(0,t.jsx)(C,{"data-slot":"popover",...e})}function V({...e}){return(0,t.jsx)(R,{"data-slot":"popover-trigger",...e})}function U({className:e,align:r="center",sideOffset:n=4,...l}){return(0,t.jsx)(M,{children:(0,t.jsx)(_,{"data-slot":"popover-content",align:r,sideOffset:n,className:(0,q.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...l})})}e.s(["Popover",()=>$,"PopoverContent",()=>U,"PopoverTrigger",()=>V],69262)},6662,e=>{"use strict";var t=e.i(43476),r=e.i(52236);function n({className:e,...n}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...n})}e.s(["Textarea",()=>n])},75389,43531,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(78745);e.s(["Check",()=>n.default],43531);var n=n;let l=(0,e.i(75254).default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var a=e.i(7233),s=e.i(52236),i=e.i(66691),o=e.i(69262),d=/[\\\/_+.#"@\[\(\{&]/,c=/[\\\/_+.#"@\[\(\{&]/g,u=/[\s-]/,m=/[\s-]/g;function x(e){return e.toLowerCase().replace(m," ")}var f=e.i(26999),h=e.i(48425),p=e.i(10772),g=e.i(20783),v='[cmdk-group=""]',b='[cmdk-group-items=""]',y='[cmdk-item=""]',j=`${y}:not([aria-disabled="true"])`,N="cmdk-item-select",w="data-value",k=(e,t,r)=>{var n;return n=e,function e(t,r,n,l,a,s,i){if(s===r.length)return a===t.length?1:.99;var o=`${a},${s}`;if(void 0!==i[o])return i[o];for(var x,f,h,p,g=l.charAt(s),v=n.indexOf(g,a),b=0;v>=0;)(x=e(t,r,n,l,v+1,s+1,i))>b&&(v===a?x*=1:d.test(t.charAt(v-1))?(x*=.8,(h=t.slice(a,v-1).match(c))&&a>0&&(x*=Math.pow(.999,h.length))):u.test(t.charAt(v-1))?(x*=.9,(p=t.slice(a,v-1).match(m))&&a>0&&(x*=Math.pow(.999,p.length))):(x*=.17,a>0&&(x*=Math.pow(.999,v-a))),t.charAt(v)!==r.charAt(s)&&(x*=.9999)),(x<.1&&n.charAt(v-1)===l.charAt(s+1)||l.charAt(s+1)===l.charAt(s)&&n.charAt(v-1)!==l.charAt(s))&&.1*(f=e(t,r,n,l,v+1,s+2,i))>x&&(x=.1*f),x>b&&(b=x),v=n.indexOf(g,v+1);return i[o]=b,b}(n=r&&r.length>0?`${n+" "+r.join(" ")}`:n,t,x(n),x(t),0,0,{})},C=r.createContext(void 0),S=r.createContext(void 0),E=r.createContext(void 0),R=r.forwardRef((e,t)=>{let n=B(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),l=B(()=>new Set),a=B(()=>new Map),s=B(()=>new Map),i=B(()=>new Set),o=T(e),{label:d,children:c,value:u,onValueChange:m,filter:x,shouldFilter:f,loop:g,disablePointerSelection:E=!1,vimBindings:R=!0,...A}=e,D=(0,p.useId)(),I=(0,p.useId)(),M=(0,p.useId)(),P=r.useRef(null),_=q();L(()=>{if(void 0!==u){let e=u.trim();n.current.value=e,F.emit()}},[u]),L(()=>{_(6,Q)},[]);let F=r.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var l,a,s,i;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)H(),U(),_(1,K);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(M);e?e.focus():null==(l=document.getElementById(D))||l.focus()}if(_(7,()=>{var e;n.current.selectedItemId=null==(e=X())?void 0:e.id,F.emit()}),r||_(5,Q),(null==(a=o.current)?void 0:a.value)!==void 0){null==(i=(s=o.current).onValueChange)||i.call(s,null!=t?t:"");return}}F.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),O=r.useMemo(()=>({value:(e,t,r)=>{var l;t!==(null==(l=s.current.get(e))?void 0:l.value)&&(s.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,z(t,r)),_(2,()=>{U(),F.emit()}))},item:(e,t)=>(l.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),_(3,()=>{H(),U(),n.current.value||K(),F.emit()}),()=>{s.current.delete(e),l.current.delete(e),n.current.filtered.items.delete(e);let t=X();_(4,()=>{H(),(null==t?void 0:t.getAttribute("id"))===e&&K(),F.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{s.current.delete(e),a.current.delete(e)}),filter:()=>o.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:D,inputId:M,labelId:I,listInnerRef:P}),[]);function z(e,t){var r,l;let a=null!=(l=null==(r=o.current)?void 0:r.filter)?l:k;return e?a(e,n.current.search,t):0}function U(){if(!n.current.search||!1===o.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(r=>{let n=a.current.get(r),l=0;n.forEach(t=>{l=Math.max(e.get(t),l)}),t.push([r,l])});let r=P.current;W().sort((t,r)=>{var n,l;let a=t.getAttribute("id"),s=r.getAttribute("id");return(null!=(n=e.get(s))?n:0)-(null!=(l=e.get(a))?l:0)}).forEach(e=>{let t=e.closest(b);t?t.appendChild(e.parentElement===t?e:e.closest(`${b} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${b} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=P.current)?void 0:t.querySelector(`${v}[${w}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function K(){let e=W().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(w);F.setState("value",t||void 0)}function H(){var e,t,r,i;if(!n.current.search||!1===o.current.shouldFilter){n.current.filtered.count=l.current.size;return}n.current.filtered.groups=new Set;let d=0;for(let a of l.current){let l=z(null!=(t=null==(e=s.current.get(a))?void 0:e.value)?t:"",null!=(i=null==(r=s.current.get(a))?void 0:r.keywords)?i:[]);n.current.filtered.items.set(a,l),l>0&&d++}for(let[e,t]of a.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=d}function Q(){var e,t,r;let n=X();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(v))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function X(){var e;return null==(e=P.current)?void 0:e.querySelector(`${y}[aria-selected="true"]`)}function W(){var e;return Array.from((null==(e=P.current)?void 0:e.querySelectorAll(j))||[])}function Y(e){let t=W()[e];t&&F.setState("value",t.getAttribute(w))}function G(e){var t;let r=X(),n=W(),l=n.findIndex(e=>e===r),a=n[l+e];null!=(t=o.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&F.setState("value",a.getAttribute(w))}function Z(e){let t=X(),r=null==t?void 0:t.closest(v),n;for(;r&&!n;)n=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,v):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,v))?void 0:r.querySelector(j);n?F.setState("value",n.getAttribute(w)):G(e)}let J=()=>Y(W().length-1),ee=e=>{e.preventDefault(),e.metaKey?J():e.altKey?Z(1):G(1)},et=e=>{e.preventDefault(),e.metaKey?Y(0):e.altKey?Z(-1):G(-1)};return r.createElement(h.Primitive.div,{ref:t,tabIndex:-1,...A,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=A.onKeyDown)||t.call(A,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":R&&e.ctrlKey&&ee(e);break;case"ArrowDown":ee(e);break;case"p":case"k":R&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),Y(0);break;case"End":e.preventDefault(),J();break;case"Enter":{e.preventDefault();let t=X();if(t){let e=new Event(N);t.dispatchEvent(e)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:V},d),$(e,e=>r.createElement(S.Provider,{value:F},r.createElement(C.Provider,{value:O},e))))}),A=r.forwardRef((e,t)=>{var n,l;let a=(0,p.useId)(),s=r.useRef(null),i=r.useContext(E),o=r.useContext(C),d=T(e),c=null!=(l=null==(n=d.current)?void 0:n.forceMount)?l:null==i?void 0:i.forceMount;L(()=>{if(!c)return o.item(a,null==i?void 0:i.id)},[c]);let u=z(a,s,[e.value,e.children,s],e.keywords),m=r.useContext(S),x=O(e=>e.value&&e.value===u.current),f=O(e=>!!c||!1===o.filter()||!e.search||e.filtered.items.get(a)>0);function v(){var e,t;b(),null==(t=(e=d.current).onSelect)||t.call(e,u.current)}function b(){m.setState("value",u.current,!0)}if(r.useEffect(()=>{let t=s.current;if(!(!t||e.disabled))return t.addEventListener(N,v),()=>t.removeEventListener(N,v)},[f,e.onSelect,e.disabled]),!f)return null;let{disabled:y,value:j,onSelect:w,forceMount:k,keywords:R,...A}=e;return r.createElement(h.Primitive.div,{ref:(0,g.composeRefs)(s,t),...A,id:a,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!x,"data-disabled":!!y,"data-selected":!!x,onPointerMove:y||o.getDisablePointerSelection()?void 0:b,onClick:y?void 0:v},e.children)}),D=r.forwardRef((e,t)=>{let{heading:n,children:l,forceMount:a,...s}=e,i=(0,p.useId)(),o=r.useRef(null),d=r.useRef(null),c=(0,p.useId)(),u=r.useContext(C),m=O(e=>!!a||!1===u.filter()||!e.search||e.filtered.groups.has(i));L(()=>u.group(i),[]),z(i,o,[e.value,e.heading,d]);let x=r.useMemo(()=>({id:i,forceMount:a}),[a]);return r.createElement(h.Primitive.div,{ref:(0,g.composeRefs)(o,t),...s,"cmdk-group":"",role:"presentation",hidden:!m||void 0},n&&r.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),$(e,e=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},r.createElement(E.Provider,{value:x},e))))}),I=r.forwardRef((e,t)=>{let{alwaysRender:n,...l}=e,a=r.useRef(null),s=O(e=>!e.search);return n||s?r.createElement(h.Primitive.div,{ref:(0,g.composeRefs)(a,t),...l,"cmdk-separator":"",role:"separator"}):null}),M=r.forwardRef((e,t)=>{let{onValueChange:n,...l}=e,a=null!=e.value,s=r.useContext(S),i=O(e=>e.search),o=O(e=>e.selectedItemId),d=r.useContext(C);return r.useEffect(()=>{null!=e.value&&s.setState("search",e.value)},[e.value]),r.createElement(h.Primitive.input,{ref:t,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":o,id:d.inputId,type:"text",value:a?e.value:i,onChange:e=>{a||s.setState("search",e.target.value),null==n||n(e.target.value)}})}),P=r.forwardRef((e,t)=>{let{children:n,label:l="Suggestions",...a}=e,s=r.useRef(null),i=r.useRef(null),o=O(e=>e.selectedItemId),d=r.useContext(C);return r.useEffect(()=>{if(i.current&&s.current){let e=i.current,t=s.current,r,n=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return n.observe(e),()=>{cancelAnimationFrame(r),n.unobserve(e)}}},[]),r.createElement(h.Primitive.div,{ref:(0,g.composeRefs)(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":l,id:d.listId},$(e,e=>r.createElement("div",{ref:(0,g.composeRefs)(i,d.listInnerRef),"cmdk-list-sizer":""},e)))}),_=r.forwardRef((e,t)=>{let{open:n,onOpenChange:l,overlayClassName:a,contentClassName:s,container:i,...o}=e;return r.createElement(f.Root,{open:n,onOpenChange:l},r.createElement(f.Portal,{container:i},r.createElement(f.Overlay,{"cmdk-overlay":"",className:a}),r.createElement(f.Content,{"aria-label":e.label,"cmdk-dialog":"",className:s},r.createElement(R,{ref:t,...o}))))}),F=Object.assign(R,{List:P,Item:A,Input:M,Group:D,Separator:I,Dialog:_,Empty:r.forwardRef((e,t)=>O(e=>0===e.filtered.count)?r.createElement(h.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:r.forwardRef((e,t)=>{let{progress:n,children:l,label:a="Loading...",...s}=e;return r.createElement(h.Primitive.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},$(e,e=>r.createElement("div",{"aria-hidden":!0},e)))})});function T(e){let t=r.useRef(e);return L(()=>{t.current=e}),t}var L="undefined"==typeof window?r.useEffect:r.useLayoutEffect;function B(e){let t=r.useRef();return void 0===t.current&&(t.current=e()),t}function O(e){let t=r.useContext(S),n=()=>e(t.snapshot());return r.useSyncExternalStore(t.subscribe,n,n)}function z(e,t,n,l=[]){let a=r.useRef(),s=r.useContext(C);return L(()=>{var r;let i=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),o=l.map(e=>e.trim());s.value(e,i,o),null==(r=t.current)||r.setAttribute(w,i),a.current=i}),a}var q=()=>{let[e,t]=r.useState(),n=B(()=>new Map);return L(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function $({asChild:e,children:t},n){let l;return e&&r.isValidElement(t)?r.cloneElement("function"==typeof(l=t.type)?l(t.props):"render"in l?l.render(t.props):t,{ref:t.ref},n(t.props.children)):n(t)}var V={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},U=e.i(54943),U=U;function K({className:e,...r}){return(0,t.jsx)(F,{"data-slot":"command",className:(0,s.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...r})}function H({className:e,...r}){return(0,t.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,t.jsx)(U.default,{className:"size-4 shrink-0 opacity-50"}),(0,t.jsx)(F.Input,{"data-slot":"command-input",className:(0,s.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...r})]})}function Q({className:e,...r}){return(0,t.jsx)(F.List,{"data-slot":"command-list",className:(0,s.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...r})}function X({...e}){return(0,t.jsx)(F.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function W({className:e,...r}){return(0,t.jsx)(F.Group,{"data-slot":"command-group",className:(0,s.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...r})}function Y({className:e,...r}){return(0,t.jsx)(F.Item,{"data-slot":"command-item",className:(0,s.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}e.i(82879);var G=e.i(70931);function Z({value:e,onPick:d,placeholder:c,inputRef:u,triggerRef:m,onEnterPicked:x}){let f,h,[p,g]=r.useState(!1),[v,b]=r.useState(e),[y,j]=(0,G.useLazySearchMedicinesQuery)(),[N,w]=(0,G.useQuickAddMedicineMutation)();r.useEffect(()=>{b(e)},[e]),r.useEffect(()=>{if(!p)return;let e=v.trim();e.length<2||y({query:e,limit:10})},[p,v,y]);let k=j.data?.items??[],C=v.trim().length>=2&&!k.some(e=>e.displayName===v.trim()),S=k.length+ +!!C,[E,R]=r.useState(0);r.useEffect(()=>{if(p){if(k.length>0||C)return void R(0);R(0)}},[p,k.length,C,v]);let A=async()=>{let e=v.trim();e.length<2||(d(await N({displayName:e}).unwrap()),g(!1),x?.())},D=e=>{d(e),g(!1),x?.()},I=e=>{S<=0||R(t=>{let r=t+e;return r<0?0:r>S-1?S-1:r})};return(0,t.jsxs)(o.Popover,{open:p,onOpenChange:g,children:[(0,t.jsx)(o.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{ref:m,variant:"outline",role:"combobox",className:"w-full justify-between rounded-xl cursor-pointer",children:[(0,t.jsx)("span",{className:"truncate text-left",children:e||c||"Select medicine"}),(0,t.jsx)(l,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(o.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,t.jsxs)(K,{onKeyDown:e=>{if(p){if("ArrowDown"===e.key){e.preventDefault(),I(1);return}if("ArrowUp"===e.key){e.preventDefault(),I(-1);return}if("Enter"===e.key){e.preventDefault(),(()=>{if(!(S<=0)){if(E<k.length){let e=k[E];e&&D(e);return}C&&A()}})();return}}},children:[(0,t.jsx)(H,{ref:u,placeholder:"Search medicine...",value:v,onValueChange:b}),(0,t.jsxs)(Q,{children:[(0,t.jsx)(X,{children:"No medicines found."}),(0,t.jsx)(W,{heading:"Results",children:k.map((r,l)=>{let a=E===l;return(0,t.jsxs)(Y,{value:r.displayName,onMouseEnter:()=>R(l),onSelect:()=>D(r),"aria-selected":a,"data-selected":a?"true":"false",children:[(0,t.jsx)(n.default,{className:(0,s.cn)("mr-2 h-4 w-4",e===r.displayName?"opacity-100":"opacity-0")}),(0,t.jsx)("span",{className:"truncate",children:r.displayName})]},r.id)})}),C?(0,t.jsx)(W,{heading:"Create",children:(h=E===(f=k.length),(0,t.jsxs)(Y,{value:`add:${v}`,onMouseEnter:()=>R(f),onSelect:()=>void A(),disabled:w.isLoading,"aria-selected":h,"data-selected":h?"true":"false",children:[(0,t.jsx)(a.Plus,{className:"mr-2 h-4 w-4"}),"Add “",v.trim(),"”"]}))}):null]})]})})]})}e.s(["MedicineCombobox",()=>Z],75389)},46349,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},34164,29978,33565,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(9797);let l=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeftIcon",()=>l],29978);var a=e.i(46349);e.s(["ChevronRightIcon",()=>a.default],33565);var a=a,s=e.i(97791),i=e.i(75760),o=e.i(52236),d=e.i(66691);function c({className:e,classNames:r,showOutsideDays:c=!0,captionLayout:m="label",buttonVariant:x="ghost",formatters:f,components:h,...p}){let g=(0,i.getDefaultClassNames)();return(0,t.jsx)(s.DayPicker,{showOutsideDays:c,className:(0,o.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:m,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...f},classNames:{root:(0,o.cn)("w-fit",g.root),months:(0,o.cn)("flex gap-4 flex-col md:flex-row relative",g.months),month:(0,o.cn)("flex flex-col w-full gap-4",g.month),nav:(0,o.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",g.nav),button_previous:(0,o.cn)((0,d.buttonVariants)({variant:x}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",g.button_previous),button_next:(0,o.cn)((0,d.buttonVariants)({variant:x}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",g.button_next),month_caption:(0,o.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",g.month_caption),dropdowns:(0,o.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",g.dropdowns),dropdown_root:(0,o.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",g.dropdown_root),dropdown:(0,o.cn)("absolute bg-popover inset-0 opacity-0",g.dropdown),caption_label:(0,o.cn)("select-none font-medium","label"===m?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",g.caption_label),table:"w-full border-collapse",weekdays:(0,o.cn)("flex",g.weekdays),weekday:(0,o.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",g.weekday),week:(0,o.cn)("flex w-full mt-2",g.week),week_number_header:(0,o.cn)("select-none w-(--cell-size)",g.week_number_header),week_number:(0,o.cn)("text-[0.8rem] select-none text-muted-foreground",g.week_number),day:(0,o.cn)("relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",p.showWeekNumber?"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md":"[&:first-child[data-selected=true]_button]:rounded-l-md",g.day),range_start:(0,o.cn)("rounded-l-md bg-accent",g.range_start),range_middle:(0,o.cn)("rounded-none",g.range_middle),range_end:(0,o.cn)("rounded-r-md bg-accent",g.range_end),today:(0,o.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",g.today),outside:(0,o.cn)("text-muted-foreground aria-selected:text-muted-foreground",g.outside),disabled:(0,o.cn)("text-muted-foreground opacity-50",g.disabled),hidden:(0,o.cn)("invisible",g.hidden),...r},components:{Root:({className:e,rootRef:r,...n})=>(0,t.jsx)("div",{"data-slot":"calendar",ref:r,className:(0,o.cn)(e),...n}),Chevron:({className:e,orientation:r,...s})=>"left"===r?(0,t.jsx)(l,{className:(0,o.cn)("size-4",e),...s}):"right"===r?(0,t.jsx)(a.default,{className:(0,o.cn)("size-4",e),...s}):(0,t.jsx)(n.ChevronDownIcon,{className:(0,o.cn)("size-4",e),...s}),DayButton:u,WeekNumber:({children:e,...r})=>(0,t.jsx)("td",{...r,children:(0,t.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:e})}),...h},...p})}function u({className:e,day:n,modifiers:l,...a}){let s=(0,i.getDefaultClassNames)(),c=r.useRef(null);return r.useEffect(()=>{l.focused&&c.current?.focus()},[l.focused]),(0,t.jsx)(d.Button,{ref:c,variant:"ghost",size:"icon","data-day":n.date.toLocaleDateString(),"data-selected-single":l.selected&&!l.range_start&&!l.range_end&&!l.range_middle,"data-range-start":l.range_start,"data-range-end":l.range_end,"data-range-middle":l.range_middle,className:(0,o.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",s.day,e),...a})}e.s(["Calendar",()=>c,"CalendarDayButton",()=>u],34164)},7064,e=>{"use strict";var t=e.i(43476),r=e.i(52236);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...n})})}function l({className:e,...n}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...n})}function a({className:e,...n}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...n})}function s({className:e,...n}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...n})}function i({className:e,...n}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function o({className:e,...n}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}e.s(["Table",()=>n,"TableBody",()=>a,"TableCell",()=>o,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>s])},57154,e=>{"use strict";var t=e.i(43476);let r=["UL","UR","LL","LR"];function n({toothDetails:e,className:n}){let l=(e??[]).map(e=>({...e,toothNumbers:(e.toothNumbers??[]).map(e=>String(e).trim()).filter(Boolean),notes:e.notes?.trim()||void 0})),a=l.some(e=>(e.toothNumbers?.length??0)>0),s=l.some(e=>!!e.notes);if(!a&&!s)return null;let i=function(e){let t=new Map;for(let e of r)t.set(e,[]);for(let r of e){let e=function(e){let t=String(e??"").trim().toUpperCase();return"UL"===t||"UR"===t||"LL"===t||"LR"===t?t:null}(r.position);if(!e)continue;let n=t.get(e)??[];n.push(...(r.toothNumbers??[]).map(e=>String(e).trim()).filter(Boolean)),t.set(e,n)}for(let e of r){let r=Array.from(new Set(t.get(e)??[]));r.sort((e,t)=>e.localeCompare(t)),t.set(e,r)}return t}(l),o=Array.from(new Set(l.map(e=>e.notes).filter(Boolean))),d=1===o.length?o[0]:null;return(0,t.jsxs)("div",{className:["flex items-start gap-3",n??""].join(" "),children:[(0,t.jsx)("div",{className:"relative shrink-0",children:(0,t.jsxs)("div",{className:"grid h-11 w-20.5 grid-cols-2 rounded-md bg-white overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-center justify-center border-b border-r border-gray-700 px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(i.get("UL")??[]).join(", ")||"—"})}),(0,t.jsx)("div",{className:"flex items-center justify-center border-b border-gray-700 px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(i.get("UR")??[]).join(", ")||"—"})}),(0,t.jsx)("div",{className:"flex items-center justify-center border-r border-gray-700 px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(i.get("LL")??[]).join(", ")||"—"})}),(0,t.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,t.jsx)("div",{className:"line-clamp-1 text-[12px] font-semibold text-gray-900",children:(i.get("LR")??[]).join(", ")||"—"})})]})}),(0,t.jsx)("div",{className:"min-w-0 flex-1",children:d?(0,t.jsx)("div",{className:"truncate text-[12px] font-semibold text-gray-900",children:d}):o.length?(0,t.jsx)("div",{className:"space-y-1",children:o.map((e,r)=>(0,t.jsx)("div",{className:"truncate text-[12px] font-semibold text-gray-900",children:e},r))}):(0,t.jsx)("div",{className:"text-[12px] text-gray-500",children:"—"})})]})}e.s(["ToothDetailsBlock",()=>n])},85449,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(57688),l=e.i(32595),a=e.i(70931),s=e.i(57154);let i={QD:"Once Daily",BID:"Twice Daily",TID:"Thrice Daily",QID:"Four Times Daily",HS:"At Bedtime",PRN:"As Needed"},o={BEFORE_MEAL:"before food",AFTER_MEAL:"After food",ANY:""};function d(e){let t=[],r=[e.medicine,e.dose].filter(Boolean).join(" ").trim();r&&t.push(r);let n=[e.frequency?`${e.frequency}(${i[e.frequency]})`:"",e.timing?o[e.timing]:""].filter(Boolean).join(" ").trim();return n&&t.push(`- ${n}`),"number"==typeof e.duration&&e.duration>0&&t.push(`For ${e.duration} days.`),e.notes?.trim()&&t.push(e.notes.trim()),t.join(" ")}function c(e,t){if("object"==typeof e&&null!==e)return e[t]}function u(e,t){let r=c(e,t);if(null!=r){if("string"==typeof r)return r;if("number"==typeof r||"boolean"==typeof r)return String(r)}}function m(e){if(!e)return;let t=function(e,t){for(let r of t){let t=c(e,r);if(void 0!==t)return t}}(e,["opdNo","opdNumber","opdId","opd","opd_no","opd_no_str"]);if(null!=t)return String(t).trim()||void 0}function x(e){let{visitId:r,isCurrent:n,currentLines:i,visit:o,showOpdInline:c,opdInlineText:m,currentToothDetails:x}=e,f=(0,a.useGetVisitRxQuery)({visitId:r},{skip:n||!r}),h=n?i:f.data?.rx?.lines??[],p=n?x:f.data?.rx?.toothDetails??[],g=u(o,"visitDate"),v=u(o,"reason"),b=(p?.length??0)>0;return h.length||v||g||b?(0,t.jsxs)("div",{className:"rx-prev-block",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-baseline justify-between",children:[(0,t.jsx)("div",{className:"text-[12px] font-bold text-gray-900",children:g?(0,l.formatClinicDateShort)(g):"—"}),(0,t.jsxs)("div",{className:"ml-4 flex min-w-0 flex-1 items-baseline justify-end gap-3",children:[(0,t.jsx)("div",{className:"min-w-0 flex-1 truncate text-right text-[11px] font-medium text-gray-700",children:v?.trim()?v.trim():""}),c&&m?(0,t.jsx)("div",{className:"shrink-0 text-right text-[11px] font-semibold text-gray-900",children:m}):null]})]}),b?(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(s.ToothDetailsBlock,{toothDetails:p})}):null,0===h.length?(0,t.jsx)("div",{className:"text-[12px] text-gray-500",children:"No medicines recorded."}):(0,t.jsx)("ol",{className:"space-y-1 text-[13px] leading-5 text-gray-900",children:h.map((e,r)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"w-5 shrink-0 text-right font-medium",children:[r+1,"."]}),(0,t.jsx)("div",{className:"font-medium",children:d(e)})]},r))}),(0,t.jsx)("div",{className:"mt-3 h-px w-full bg-gray-200"})]}):(0,t.jsx)("div",{className:"h-2"})}function f(e){let{page:r,total:n,onChange:l}=e;if(n<=1)return null;let a=(e,t)=>["h-8 min-w-8 rounded-lg border px-2 text-xs font-semibold transition",t?"opacity-50 cursor-not-allowed":"",e?"bg-black text-white border-black":"bg-white text-gray-800 hover:bg-gray-50"].join(" ");return(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:a(!1,r<=1),onClick:()=>l(Math.max(1,r-1)),disabled:r<=1,children:"Prev"}),Array.from({length:n},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{type:"button",className:a(e===r),onClick:()=>l(e),title:`Page ${e}`,children:e},e)),(0,t.jsx)("button",{type:"button",className:a(!1,r>=n),onClick:()=>l(Math.min(n,r+1)),disabled:r>=n,children:"Next"})]})}function h({patientName:e,patientPhone:a,patientAge:i,patientSex:o,sdId:c,opdNo:u,visitDateLabel:h,lines:p,receptionNotes:g,currentVisitId:v,chainVisitIds:b,visitMetaMap:y,toothDetails:j,currentOnly:N=!1}){let w,k,C=!!g?.trim(),S=(w="number"==typeof i?Number.isFinite(i)&&i>0?String(i):"":(i??"").toString().trim(),k=(o??"").toString().trim().toUpperCase(),w||k?w&&k?`${w}/${k}`:w||k||"—":"—"),E=(0,r.useMemo)(()=>(function(e){if(!e)return null;let t=e.trim().startsWith("Visit:")?e.replace("Visit:","").trim():e.trim();return/^\d{4}-\d{2}-\d{2}$/.test(t)?t:null})(h)??(0,l.clinicDateISO)(new Date),[h]),R=(0,r.useMemo)(()=>v??"CURRENT",[v]),A=(0,r.useMemo)(()=>{let e=(b&&b.length?[...b]:[R]).filter(Boolean);R&&!e.includes(R)&&e.push(R);let t=new Set;return e.filter(e=>!t.has(e)&&(t.add(e),!0))},[b,R]),D=(0,r.useMemo)(()=>y??new Map,[y]),I=!!v&&!!b&&b.length>0&&!!y,M=(0,r.useMemo)(()=>{if(I)return A[0]},[I,A]),P=(0,r.useMemo)(()=>{if(I&&M){let e=m(D.get(M));if(e)return e}return u??"—"},[I,M,D,u]),_=Math.round(225720/210),F=(0,r.useRef)(null),[T,L]=(0,r.useState)(1);(0,r.useEffect)(()=>{let e=F.current;if(!e)return;let t=new ResizeObserver(e=>{let t=Math.min(1,(e[0]?.contentRect?.width??760)/760);L(Number.isFinite(t)&&t>0?t:1)});return t.observe(e),()=>t.disconnect()},[]);let B=(0,r.useMemo)(()=>j??[],[j]),O=!I&&B.length>0,z=(0,r.useRef)(null),q=(0,r.useRef)(null),$=(0,r.useRef)(null),V=(0,r.useRef)(null),[U,K]=(0,r.useState)([]),[H,Q]=(0,r.useState)(560),[X,W]=(0,r.useState)(980),[Y,G]=(0,r.useState)(0),[Z,J]=(0,r.useState)([A]),[ee,et]=(0,r.useState)(1),er=(0,r.useMemo)(()=>[I?"H":"N",A.join(","),String(p.length),String(B.length),String(g?.length??0)].join("|"),[I,A,p.length,B.length,g]),en=I&&A.length>1;(0,r.useEffect)(()=>{N||et(1)},[N,I,A.join("|")]),(0,r.useEffect)(()=>{if(!en)return void J([A]);let e=z.current;if(!e)return;let t=()=>{if(q.current){let e=q.current.getBoundingClientRect().height;Number.isFinite(e)&&e>0&&Q(Math.floor(e))}if($.current){let e=$.current.getBoundingClientRect().height;Number.isFinite(e)&&e>0&&W(Math.floor(e))}if(V.current){let e=V.current.getBoundingClientRect().height;G(Number.isFinite(e)&&e>0?Math.ceil(e):0)}K(Array.from(e.querySelectorAll('[data-rx-block="1"]')).map(e=>{let t=Math.ceil(e.getBoundingClientRect().height),r=window.getComputedStyle(e);return Math.ceil(t+(Number.parseFloat(r.marginTop||"0")||0)+(Number.parseFloat(r.marginBottom||"0")||0))}))};t(),requestAnimationFrame(()=>t()),document.fonts?.ready&&document.fonts.ready.then(()=>requestAnimationFrame(()=>t()));let r=new ResizeObserver(()=>t());return r.observe(e),()=>r.disconnect()},[en,er]),(0,r.useEffect)(()=>{if(!I||!en||!U.length||U.length!==A.length)return void J([A]);let e=[];{let t=[],r=0,n=H;for(let l=0;l<A.length;l++){let a=A[l],s=U[l]??0;t.length>0&&r+s>n-10&&(e.push(t),t=[],r=0,n=X),t.push(a),r+=s}t.length&&e.push(t),e.length||(e=[A])}let t=e=>{let t=A.indexOf(e);return t>=0?U[t]??0:0},r=e=>e.reduce((e,r)=>e+t(r),0);for(let n=0;n<3;n++){for(let n=0;n<e.length-1;n++){let l=0===n?H:X;for(;e[n+1].length>0;){let a=e[n+1][0],s=t(a);if(r(e[n])+s<=l-10)e[n].push(a),e[n+1].shift();else break}}(e=e.filter(e=>e.length>0)).length||(e=[A])}if(C&&Y>0&&e.length>0){let t=e.length-1,n=(0===t?H:X)-Y;if(r(e[t])>n-10&&e[t].length>1){let r=e[t].pop();r&&e.push([r])}}J(e)},[I,en,A,U,H,X,C,Y]),(0,r.useEffect)(()=>{if(!I||!N||!Z.length)return;let e=Z.findIndex(e=>e.includes(R));e>=0&&et(e+1)},[N,I,Z,R]),(0,r.useEffect)(()=>{let e=Z.length||1;ee>e&&et(e),ee<1&&et(1)},[Z.length,ee]);let el=Z.length||1,ea=Z[Math.max(0,ee-1)]??A,es=N?{visibility:"hidden"}:void 0,ei=()=>C?(0,t.jsx)("div",{className:"shrink-0 px-6 pb-2",children:(0,t.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-gray-50 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-[10px] font-semibold text-gray-700",children:"Reception Notes"}),(0,t.jsx)("div",{className:"mt-1 whitespace-pre-wrap text-[10px] leading-4 text-gray-900",children:g})]})}):null,eo=C&&ee===el&&!N,ed=1===ee,ec=e=>(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>{let r=D.get(e),n=null!=M&&e===M,l=n?void 0:m(r),a=e===R;return(0,t.jsx)("div",{"data-rx-block":"1",style:N&&!a?{visibility:"hidden"}:void 0,children:(0,t.jsx)(x,{visitId:"CURRENT"===e?"":e,isCurrent:a,currentLines:p,visit:r,showOpdInline:!n,opdInlineText:l,currentToothDetails:B})},e)})}),eu=en?(0,t.jsx)("div",{"aria-hidden":"true",className:"pointer-events-none fixed left-0 top-0",style:{width:0,height:0,overflow:"hidden",opacity:0},children:(0,t.jsx)("div",{style:{width:760},children:(0,t.jsxs)("div",{ref:z,className:"w-full",children:[(0,t.jsx)("div",{className:"h-[1080px] w-full overflow-hidden border bg-white",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-4",children:[(0,t.jsx)("div",{className:"h-16 w-full"}),(0,t.jsx)("div",{className:"mt-2 h-px w-full"})]}),(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-3",children:[(0,t.jsx)("div",{className:"h-24 w-full"}),(0,t.jsx)("div",{className:"mt-3 h-px w-full"})]}),(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-4 pb-4",children:(0,t.jsx)("div",{ref:q,className:"h-full w-full"})}),(0,t.jsx)("div",{className:"shrink-0 px-6 pb-2",children:(0,t.jsx)("div",{ref:V,className:"w-full",children:ei()})})]})}),(0,t.jsx)("div",{className:"mt-8 h-[1080px] w-full overflow-hidden border bg-white",children:(0,t.jsx)("div",{className:"flex h-full flex-col",children:(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-6 pb-4",children:(0,t.jsx)("div",{ref:$,className:"h-full w-full"})})})}),(0,t.jsx)("div",{className:"mt-8 px-6 pt-4",children:ec(A)})]})})}):null;return(0,t.jsxs)("div",{className:"w-full",children:[eu,(0,t.jsxs)("div",{ref:F,className:"w-full",children:[(0,t.jsx)("div",{className:"relative w-full",style:{height:Math.ceil(_*T)},children:(0,t.jsx)("div",{className:"origin-top-left",style:{width:760,height:_,transform:`scale(${T})`},children:(0,t.jsx)("div",{className:"h-full w-full overflow-hidden rounded-xl border bg-white shadow-sm",children:ed?(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-4",style:es,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsx)("div",{className:"relative h-16 w-16",children:(0,t.jsx)(n.default,{src:"/rx-logo-r.png",alt:"Rx Logo",fill:!0,className:"object-contain",priority:!0,unoptimized:!0})}),(0,t.jsxs)("div",{className:"mt-1 flex w-full flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"text-[10px] font-semibold tracking-[0.30em] text-emerald-600",children:"CONTACT"}),(0,t.jsx)("div",{className:"text-[12px] font-semibold text-gray-900",children:"9938942846"}),(0,t.jsx)("div",{className:"mt-1 max-w-130 text-[9px] font-medium leading-4 text-gray-700",children:"A-33, STALWART COMPLEX, UNIT - IV, BHUBANESWAR"}),(0,t.jsx)("div",{className:"max-w-130 text-[9px] font-medium leading-4 text-red-400 uppercase",children:"Clinic hours: 10 : 00 AM - 01 : 30 PM & 06 : 00 PM - 08:00 PM, Sunday Closed"})]}),(0,t.jsx)("div",{className:"relative h-14 w-38",children:(0,t.jsx)(n.default,{src:"/dashboard-logo.png",alt:"Sarangi Dentistry",fill:!0,className:"object-contain",priority:!0,unoptimized:!0})})]}),(0,t.jsx)("div",{className:"mt-2 h-px w-full bg-emerald-600/60"})]}),(0,t.jsxs)("div",{className:"shrink-0 px-6 pt-3",style:es,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,t.jsxs)("div",{className:"min-w-0 flex flex-col",children:[(0,t.jsx)("div",{className:"text-[0.8rem] font-bold text-gray-900",children:"Dr. Soumendra Sarangi"}),(0,t.jsx)("div",{className:"mt-0 text-[0.7rem] font-light text-gray-700",children:"B.D.S. Regd. - 68"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex flex-col items-end text-right",children:[(0,t.jsx)("div",{className:"text-[0.8rem] font-bold text-gray-900",children:"Dr. Vaishnovee Sarangi"}),(0,t.jsx)("div",{className:"mt-0 text-[0.7rem] font-light text-gray-700",children:"B.D.S. Redg. - 3057"})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex w-full justify-between gap-6",children:[(0,t.jsxs)("div",{className:"space-y-0.5 text-[0.8rem] text-gray-800",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Patient Name"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:e??"—"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Contact No."}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:a??"—"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Age/Sex"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:S})]})]}),(0,t.jsxs)("div",{className:"w-[320px] justify-start space-y-0 text-[0.8rem]",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"Regd. Date"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:E})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"SD. ID"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:c??"—"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"w-20 text-gray-600",children:"OPD. No"}),(0,t.jsx)("div",{className:"text-gray-600",children:":"}),(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:P})]})]})]}),(0,t.jsx)("div",{className:"mt-3 h-px w-full bg-gray-900/30"})]}),(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-4 pb-4",children:I?ec(ea):(0,t.jsxs)(t.Fragment,{children:[O?(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)(s.ToothDetailsBlock,{toothDetails:B}),(0,t.jsx)("div",{className:"mt-3 h-px w-full bg-gray-200"})]}):null,0===p.length?(0,t.jsx)("div",{className:"text-[13px] text-gray-500",children:"No medicines added yet."}):(0,t.jsx)("ol",{className:"text-sm leading-6 text-gray-900",children:p.map((e,r)=>(0,t.jsxs)("li",{className:"flex gap-1",children:[(0,t.jsxs)("div",{className:"w-4 shrink-0 text-right font-medium",children:[r+1,"."]}),(0,t.jsx)("div",{className:"font-medium",children:d(e)})]},r))})]})}),eo?ei():null]}):(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsx)("div",{className:"min-h-0 flex-1 px-6 pt-6 pb-4",children:I?ec(ea):null}),eo?ei():null]})})})}),I&&!N?(0,t.jsx)(f,{page:ee,total:el,onChange:et}):null]})]})}e.s(["PrescriptionPreview",()=>h])},28430,11888,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(57688),l=e.i(70931),a=e.i(82879);function s({xrayId:e,open:s,onOpenChange:i}){let[o,d]=(0,r.useState)(e);(0,r.useEffect)(()=>{s&&d(e)},[s,e]);let{data:c,isFetching:u,isError:m}=(0,l.useGetXrayUrlQuery)({xrayId:o??"",size:"original"},{skip:!s||!o});return(0,t.jsx)(a.Dialog,{open:s,onOpenChange:i,children:(0,t.jsxs)(a.DialogContent,{className:"max-w-4xl",children:[(0,t.jsx)(a.DialogHeader,{children:(0,t.jsx)(a.DialogTitle,{children:"X-ray Viewer"})}),(0,t.jsx)("div",{className:"relative w-full overflow-hidden rounded-xl border bg-white",children:(0,t.jsxs)("div",{className:"flex min-h-105 items-center justify-center p-4",children:[u&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Loading…"}),m&&(0,t.jsx)("div",{className:"text-sm text-red-600",children:"Failed to load image."}),c?.url&&(0,t.jsx)(n.default,{src:c.url,alt:"X-ray",width:1200,height:900,className:"h-auto w-full object-contain",unoptimized:!0})]})})]})})}e.s(["XrayViewerModal",()=>s],11888);var i=e.i(32595);function o({xrayId:e,enabled:a}){let{ref:s,inView:i}=function(e){let t=(0,r.useRef)(null),[n,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let r=t.current;if(!r)return;let n=new IntersectionObserver(e=>{let t=e[0];t&&t.isIntersecting&&l(!0)},e);return n.observe(r),()=>n.disconnect()},[e]),{ref:t,inView:n}}({rootMargin:"250px"}),{data:o}=(0,l.useGetXrayUrlQuery)({xrayId:e,size:"thumb"},{skip:!(a&&i)});return(0,t.jsx)("div",{ref:s,className:"h-18 w-18",children:o?.url?(0,t.jsx)(n.default,{src:o.url,alt:"X-ray thumb",width:160,height:160,className:"h-18 w-18 rounded-xl object-cover",unoptimized:!0}):(0,t.jsx)("div",{className:"h-18 w-18 rounded-xl bg-gray-100"})})}function d({visitId:e}){let{data:n,isLoading:a,isError:d,refetch:c}=(0,l.useListVisitXraysQuery)({visitId:e}),u=n?.items??[],m=(0,r.useMemo)(()=>!a&&!d&&0===u.length,[a,d,u.length]),[x,f]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=!1,t=()=>{e||v(!0)},r=window.requestIdleCallback;if("function"==typeof r){let n=r(t,{timeout:800});return()=>{e=!0;let t=window.cancelIdleCallback;t?.(n)}}let n=window.setTimeout(t,450);return()=>{e=!0,window.clearTimeout(n)}},[e]),(0,t.jsxs)("div",{className:"rounded-2xl border bg-white p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:"X-rays"}),(0,t.jsx)("button",{type:"button",className:"text-xs text-gray-600 hover:underline",onClick:()=>void c(),children:"Refresh"})]}),a&&(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Loading…"}),d&&(0,t.jsx)("div",{className:"mt-2 text-xs text-red-600",children:"Failed to load X-rays."}),m&&(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"No X-rays uploaded yet."}),u.length>0&&(0,t.jsx)("div",{className:"mt-3 flex flex-wrap gap-3",children:u.map(e=>{let r;return(0,t.jsxs)("button",{type:"button",className:"group rounded-2xl border bg-white p-2 pb-3 transition hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-900/10",onClick:()=>{p(e.xrayId),f(!0)},children:[(0,t.jsx)(o,{xrayId:e.xrayId,enabled:g}),(0,t.jsxs)("div",{className:"mt-2 text-left",children:[(0,t.jsx)("div",{className:"text-[11px] font-medium text-gray-800",children:Number.isFinite((r=new Date(e.takenAt)).getTime())?new Intl.DateTimeFormat("en-IN",{timeZone:i.CLINIC_TZ,day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(r):"—"}),(0,t.jsxs)("div",{className:"text-[10px] text-gray-500",children:[Math.round(e.size/1024)," KB"]})]})]},e.xrayId)})}),h&&(0,t.jsx)(s,{xrayId:h,open:x,onOpenChange:e=>{f(e),e||p(null)}})]})}e.s(["XrayTrayReadOnly",()=>d],28430)},89169,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(66691),l=e.i(24911),a=e.i(33),s=e.i(69262),i=e.i(6662),o=e.i(75389),d=e.i(7233),c=e.i(27612),u=e.i(88699);let m=["QD","BID","TID","QID","HS","PRN"],x=["BE_MEAL","AF_MEAL","ANY"],f=e=>{if(e)return"BEFORE_MEAL"===e?"BE_MEAL":"AFTER_MEAL"===e?"AF_MEAL":"ANY"};function h(e){return m.includes(e)}function p(e){return"object"==typeof e&&null!==e}function g({lines:e,onChange:g}){let[v,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(void 0),[k,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(void 0),[R,A]=(0,r.useState)(!1),[D,I]=(0,r.useState)(""),[M,P]=(0,r.useState)(null),[_,F]=(0,r.useState)(""),T=(0,r.useRef)(null),L=(0,r.useRef)(null),B=(0,r.useRef)(null),O=(0,r.useRef)(null),z=(0,r.useRef)(null),q=(0,r.useRef)(null),$=(0,r.useRef)(null),V=(0,r.useRef)(null),U=(0,r.useRef)(null),K=e=>{requestAnimationFrame(()=>e?.focus())},H=(0,r.useMemo)(()=>{if(!v.trim()||!y.trim()||!N)return!1;let e=Number(k);return!!Number.isFinite(e)&&!(e<1)},[v,y,N,k]),Q=()=>{let t=v.trim(),r=y.trim(),n=Number(k);if(!t||!r||!N||!Number.isFinite(n)||n<1)return;let l=(e=>{if(e)return"BE_MEAL"===e?"BEFORE_MEAL":"AF_MEAL"===e?"AFTER_MEAL":"ANY"})(S);g([...e,{medicine:t,dose:r,frequency:N,duration:n,...l?{timing:l}:{},...D.trim()?{notes:D.trim()}:{}}]),b(""),j(""),w(void 0),C(""),E(void 0),I(""),A(!1),requestAnimationFrame(()=>{L.current?.focus()})},X=t=>{let r=e.slice();r.splice(t,1),g(r),M===t&&(P(null),F(""))},W=()=>{if(null==M)return;let t=e.slice(),r=_.trim();t[M]={...t[M],...r?{notes:r}:{notes:void 0}},g(t),P(null),F("")},Y=()=>{A(!0),requestAnimationFrame(()=>V.current?.focus())},G=()=>{A(!1),requestAnimationFrame(()=>U.current?.focus())},Z=e.length>4;return(0,t.jsxs)("div",{className:" w-full overflow-hidden rounded-xl border bg-white",children:[(0,t.jsxs)("div",{className:"border-b bg-white px-3 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-[25%]",children:(0,t.jsx)(o.MedicineCombobox,{value:v,onPick:e=>{b(e.displayName),(e=>{if(!p(e))return;let t=e.defaults??e.default??e.presetDefaults;if(!p(t))return;let r=t.dose??t.doseText??t.dosage??t.strength??t.defaultDose;"string"==typeof r&&r.trim()&&j(r.trim());let n=t.frequency??t.freq??t.defaultFrequency;"string"==typeof n&&h(n)&&w(n);let l=t.duration??t.dur??t.days??t.durationDays??t.defaultDuration;if("number"==typeof l&&Number.isFinite(l)&&l>0&&C(String(l)),"string"==typeof l&&l.trim()&&Number.isFinite(Number(l))){let e=Number(l);e>0&&C(String(e))}let a=t.timing??t.time??t.defaultTiming;"string"==typeof a&&("BEFORE_MEAL"===a?E("BE_MEAL"):"AFTER_MEAL"===a?E("AF_MEAL"):"ANY"===a&&E("ANY"));let s=t.notes??t.note;"string"==typeof s&&s.trim()&&(I(s.trim()),A(!0))})(e),e.defaultFrequency&&h(e.defaultFrequency)&&w(e.defaultFrequency),"number"==typeof e.defaultDuration&&C(String(e.defaultDuration)),K(B.current)},placeholder:"Medicine name",inputRef:T,triggerRef:L,onEnterPicked:()=>K(B.current)})}),(0,t.jsx)("div",{className:"w-[16.666%]",children:(0,t.jsxs)(a.Select,{value:N??"",onValueChange:e=>{w(h(e)?e:void 0),K(z.current)},children:[(0,t.jsx)(a.SelectTrigger,{ref:O,className:"h-10 rounded-xl w-full cursor-pointer",onKeyDown:e=>{"Enter"===e.key&&N&&(e.preventDefault(),K(z.current))},children:(0,t.jsx)(a.SelectValue,{placeholder:"Freq"})}),(0,t.jsx)(a.SelectContent,{children:m.map(e=>(0,t.jsx)(a.SelectItem,{value:e,className:"cursor-pointer",children:e},e))})]})}),(0,t.jsx)("div",{className:"w-[16.666%]",children:(0,t.jsx)(l.Input,{ref:z,className:"h-9 rounded-xl",value:k,onChange:e=>C(e.target.value),placeholder:"Days",inputMode:"numeric",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),K(q.current))}})}),(0,t.jsx)("div",{className:"w-[16.666%] pl-1",children:(0,t.jsxs)(a.Select,{value:S??"",onValueChange:e=>{E(x.includes(e)?e:void 0),K($.current)},children:[(0,t.jsx)(a.SelectTrigger,{ref:q,className:"h-10 rounded-xl cursor-pointer",onKeyDown:e=>{"Enter"===e.key&&S&&(e.preventDefault(),K($.current))},children:(0,t.jsx)(a.SelectValue,{placeholder:"Timing"})}),(0,t.jsx)(a.SelectContent,{children:x.map(e=>(0,t.jsx)(a.SelectItem,{value:e,className:"cursor-pointer",children:e},e))})]})}),(0,t.jsx)("div",{className:"w-[16.666%] pl-2",children:(0,t.jsxs)(s.Popover,{open:R,onOpenChange:e=>{A(e),e&&requestAnimationFrame(()=>V.current?.focus())},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"flex items-center justify-start",children:(0,t.jsx)(n.Button,{ref:$,type:"button",variant:"outline",size:"icon",className:"h-10 w-12 rounded-xl cursor-pointer","aria-label":"Add notes",onClick:()=>Y(),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Y())},children:"Add"})})}),(0,t.jsxs)(s.PopoverContent,{side:"bottom",align:"end",className:"w-80 rounded-2xl p-3",children:[(0,t.jsx)("div",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Notes"}),(0,t.jsx)(i.Textarea,{ref:V,className:"min-h-22.5 resize-none rounded-xl",value:D,onChange:e=>I(e.target.value),placeholder:"Add notes for this medicine…",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())}}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-[11px] text-gray-500",children:D.trim()?"Will be saved with this line.":"Optional"}),(0,t.jsx)(n.Button,{type:"button",variant:"ghost",className:"h-8 rounded-xl px-3 text-xs cursor-pointer",onClick:()=>G(),children:"Done"})]})]})]})}),(0,t.jsx)("div",{className:"w-[8.333%] pr-4",children:(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(n.Button,{ref:U,type:"button",className:"h-10 w-10 rounded-xl cursor-pointer",disabled:!H,onClick:Q,"aria-label":"Add medicine",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Q())},children:(0,t.jsx)(d.Plus,{className:"h-5 w-5"})})})})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-[24%]",children:(0,t.jsx)(l.Input,{ref:B,className:"h-9 rounded-xl",value:y,onChange:e=>j(e.target.value),placeholder:"Dose",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),K(O.current))}})}),(0,t.jsx)("div",{className:"flex-1"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b bg-gray-50 px-3 py-2 text-[11px] font-semibold text-gray-600",children:[(0,t.jsx)("div",{className:"w-[25%]",children:"Medicine"}),(0,t.jsx)("div",{className:"w-[16.666%]",children:"Frequency"}),(0,t.jsx)("div",{className:"w-[16.666%]",children:"Duration"}),(0,t.jsx)("div",{className:"w-[16.666%] pl-2",children:"Timing"}),(0,t.jsx)("div",{className:"w-[16.666%] pl-5",children:"Notes"}),(0,t.jsx)("div",{className:"w-[8.333%]",children:"Actions"})]}),(0,t.jsx)("div",{className:["divide-y",Z?"max-h-50 2xl:max-h-full overflow-y-auto":"","dms-scroll"].join(" "),children:0===e.length?(0,t.jsx)("div",{className:"px-3 py-6 text-sm text-gray-500",children:"No medicines added yet."}):e.map((r,l)=>(0,t.jsxs)("div",{className:"flex items-start gap-2 px-3 py-1 text-sm",children:[(0,t.jsxs)("div",{className:"w-[25%]",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:r.medicine}),(0,t.jsx)("div",{className:"text-[12px] text-gray-500",children:r.dose})]}),(0,t.jsx)("div",{className:"w-[16.666%] pl-3 text-gray-800",children:r.frequency}),(0,t.jsx)("div",{className:"w-[16.666%] text-gray- pl-3",children:r.duration}),(0,t.jsx)("div",{className:"w-[16.666%] pl-2 text-gray-800",children:f(r.timing)??"—"}),(0,t.jsx)("div",{className:"w-[16.666%]",children:(0,t.jsxs)(s.Popover,{open:M===l,onOpenChange:t=>{t?(P(l),F(e[l]?.notes??"")):(P(null),F(""))},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(n.Button,{type:"button",variant:"link",className:"h-auto p-0 pl-6 text-xs font-semibold text-gray-800 underline decoration-gray-200 underline-offset-2 hover:decoration-gray-400",children:"View"})}),(0,t.jsxs)(s.PopoverContent,{side:"bottom",align:"start",className:"w-80 rounded-2xl p-3",children:[(0,t.jsx)("div",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Notes"}),(0,t.jsx)(i.Textarea,{className:"min-h-22.5 resize-none rounded-xl",value:M===l?_:"",onChange:e=>F(e.target.value),placeholder:"Add or edit notes…"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)(n.Button,{type:"button",variant:"ghost",className:"h-8 rounded-xl px-3 text-xs",onClick:()=>{P(null),F("")},children:"Cancel"}),(0,t.jsx)(n.Button,{type:"button",className:"h-8 rounded-xl px-3 text-xs",onClick:W,children:"Save"})]})]})]})}),(0,t.jsx)("div",{className:"w-[8.333%]",children:(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsx)(n.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl",onClick:()=>{let t;b((t=e[l]).medicine??""),j(t.dose??""),w(t.frequency),C(String(t.duration??"")),E(f(t.timing??void 0)),I(t.notes??""),A(!!t.notes?.trim()),X(l),requestAnimationFrame(()=>{L.current?.focus()})},"aria-label":"Edit",children:(0,t.jsx)(u.Pencil,{className:"h-4 w-4"})}),(0,t.jsx)(n.Button,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl text-gray-600 hover:text-gray-900",onClick:()=>X(l),"aria-label":"Delete",children:(0,t.jsx)(c.Trash2,{className:"h-4 w-4"})})]})})]},l))})]})}e.s(["MedicinesEditor",()=>g])},23442,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(70931),l=e.i(82879),a=e.i(66691),s=e.i(24911),i=e.i(23621),o=e.i(33),d=e.i(43531),c=e.i(55436);let u=(0,e.i(75254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function m(e,t){if("object"==typeof e&&null!==e)return e[t]}function x(e,t){let r=m(e,t);if(null!=r){if("string"==typeof r)return r;if("number"==typeof r||"boolean"==typeof r)return String(r)}}function f({open:e,onOpenChange:f,disabled:h,onImport:p}){let[g,v]=r.useState(""),[b,y]=r.useState(""),[j,N]=r.useState("ALL");r.useEffect(()=>{let e=setTimeout(()=>y(g.trim()),250);return()=>clearTimeout(e)},[g]);let w=(0,n.useGetRxPresetsQuery)({query:b||void 0,limit:20,filter:j},{skip:!e}),k=w.data?.items??[],[C,S]=r.useState(null);r.useEffect(()=>{e||(v(""),y(""),S(null),N("ALL"))},[e]);let E=r.useMemo(()=>C?k.find(e=>e.id===C)??null:null,[k,C]),R=!h&&!!E?.lines?.length;return(0,t.jsx)(l.Dialog,{open:e,onOpenChange:f,children:(0,t.jsx)(l.DialogContent,{className:"w-[96vw] max-w-225 sm:max-w-250 lg:max-w-280 xl:max-w-312.5 2xl:max-w-340 rounded-3xl p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex h-[78vh] flex-col",children:[(0,t.jsxs)(l.DialogHeader,{className:"px-6 pt-6 pb-4 border-b bg-linear-to-b from-white to-gray-50",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)(l.DialogTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(u,{className:"h-5 w-5 text-gray-800"}),"Import Rx Preset"]}),(0,t.jsx)(l.DialogDescription,{className:"sr-only",children:"Search and select a prescription preset, preview its medicines, then import them into the current prescription."}),(0,t.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Search and select a preset, then import medicines into this prescription."})]})}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(c.Search,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(s.Input,{value:g,onChange:e=>v(e.target.value),placeholder:"Search preset name…",className:"h-11 rounded-2xl pl-9",disabled:h})]}),(0,t.jsx)("div",{className:"w-full sm:w-60",children:(0,t.jsxs)(o.Select,{value:j,onValueChange:e=>N(e),children:[(0,t.jsx)(o.SelectTrigger,{className:"h-11 rounded-2xl",children:(0,t.jsx)(o.SelectValue,{placeholder:"Filter"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"ALL",children:"All"}),(0,t.jsx)(o.SelectItem,{value:"MINE",children:"My presets"}),(0,t.jsx)(o.SelectItem,{value:"ADMIN",children:"Admin"}),(0,t.jsx)(o.SelectItem,{value:"PUBLIC",children:"Public"})]})]})})]})]}),(0,t.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col gap-0 lg:flex-row",children:[(0,t.jsxs)("div",{className:"min-h-0 flex-1 border-b lg:border-b-0 lg:border-r bg-white",children:[(0,t.jsxs)("div",{className:"px-6 py-3 text-xs font-semibold text-gray-600",children:["Presets ",k.length?`(${k.length})`:""]}),(0,t.jsx)("div",{className:"min-h-0 max-h-full overflow-y-auto px-3 pb-3",children:w.isFetching?(0,t.jsx)("div",{className:"px-3 py-8 text-sm text-gray-500",children:"Loading presets…"}):0===k.length?(0,t.jsx)("div",{className:"px-3 py-8 text-sm text-gray-500",children:"No presets found."}):(0,t.jsx)("div",{className:"space-y-2",children:k.map(e=>{let r=C===e.id,n=x(e,"scope"),l=function(e,t){let r=m(e,t);if(!Array.isArray(r))return;let n=r.filter(e=>"string"==typeof e);return n.length?n:void 0}(e,"tags"),a="ADMIN"===n?{label:"Admin",className:"bg-gray-900 text-white"}:"PUBLIC"===n?{label:"Public",className:"bg-emerald-600 text-white"}:{label:"Private",className:"bg-slate-100 text-slate-700 border border-slate-200"};return(0,t.jsx)("button",{type:"button",onClick:()=>S(e.id),className:["w-full text-left rounded-2xl border px-4 py-3 transition",r?"border-gray-900 bg-gray-50 shadow-sm":"border-gray-200 hover:bg-gray-50"].join(" "),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"truncate text-sm font-semibold text-gray-900",children:e.name}),(0,t.jsx)(i.Badge,{className:`rounded-full ${a.className}`,children:a.label})]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[e.lines?.length??0," medicine",(e.lines?.length??0)===1?"":"s",l?.length?` \xb7 ${l.join(", ")}`:""]})]}),r?(0,t.jsx)("div",{className:"mt-0.5 inline-flex h-7 w-7 items-center justify-center rounded-full bg-gray-900 text-white",children:(0,t.jsx)(d.Check,{className:"h-4 w-4"})}):(0,t.jsx)("div",{className:"mt-0.5 h-7 w-7 rounded-full border border-gray-200"})]})},e.id)})})})]}),(0,t.jsxs)("div",{className:"min-h-0 w-full lg:w-[60%] bg-gray-50",children:[(0,t.jsx)("div",{className:"px-6 py-3 text-xs font-semibold text-gray-600",children:"Preview"}),(0,t.jsxs)("div",{className:"min-h-0 overflow-y-auto px-6 pb-6",children:[E?(0,t.jsxs)("div",{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:E.name}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[(E.lines?.length??0).toString()," medicine",(E.lines?.length??0)===1?"":"s"]}),(0,t.jsx)("div",{className:"mt-4 space-y-2",children:(E.lines??[]).map((e,r)=>{let n=x(e,"medicine")??x(e,"medicineName")??"—",l=x(e,"dose"),a=x(e,"frequency"),s=x(e,"duration"),i=x(e,"timing"),o=x(e,"notes");return(0,t.jsxs)("div",{className:"rounded-xl border border-gray-100 bg-gray-50 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:n}),(0,t.jsx)("div",{className:"mt-0.5 text-xs text-gray-600",children:[l?`Dose: ${l}`:null,a?`Freq: ${a}`:null,s?`Days: ${s}`:null,i?`Timing: ${i}`:null].filter(Boolean).join(" · ")||"—"}),o?(0,t.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Notes: ",o]}):null]},r)})})]}):(0,t.jsx)("div",{className:"rounded-2xl border bg-white p-4 text-sm text-gray-500",children:"Select a preset to preview its medicines."}),(0,t.jsx)("div",{className:"mt-4 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-xs text-amber-900",children:"After import, medicines will appear as normal editable rows. You can edit or print immediately."})]})]})]}),(0,t.jsx)("div",{className:"border-t bg-white px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:h?"Editing is disabled for this visit.":"Select a preset to enable Import."}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"rounded-2xl",onClick:()=>f(!1),children:"Cancel"}),(0,t.jsx)(a.Button,{type:"button",className:"rounded-2xl bg-black text-white hover:bg-black/90",disabled:!R,onClick:()=>{if(!E)return;let e=(E.lines??[]??[]).map(e=>{let t,r=(x(e,"medicine")??x(e,"medicineName")??"").toString().trim();if(!r)return null;let n=(x(e,"dose")??"").toString().trim(),l=m(e,"frequency"),a="string"==typeof l&&["QD","BID","TID","QID","HS","PRN"].includes(l)||"string"==typeof l&&["QD","BID","TID","QID","HS","PRN"].includes(l.toUpperCase())?"string"==typeof l?l.toUpperCase():l:"QD",s=("number"==typeof(t=m(e,"duration"))&&Number.isFinite(t)?t:"string"==typeof t&&Number.isFinite(Number(t))?Number(t):void 0)??0,i=m(e,"timing"),o="string"==typeof i&&["BEFORE_MEAL","AFTER_MEAL","ANY"].includes(i)?i:void 0,d=(x(e,"notes")??"").toString().trim();return{medicine:r,dose:n,frequency:a,duration:s,...o?{timing:o}:{},...d?{notes:d}:{}}}).filter(e=>!!e);e.length&&(p(e),f(!1))},children:"Import"})]})]})})]})})})}e.s(["RxPresetImportDialog",()=>f],23442)}]);