(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";var s=e.i(54943);e.s(["Search",()=>s.default])},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},54943,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["default",()=>s])},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},88699,e=>{"use strict";let s=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>s],88699)},13212,e=>{"use strict";var s=e.i(43476),t=e.i(22016),a=e.i(71645),r=e.i(70317),l=e.i(66691),i=e.i(24911),d=e.i(33),n=e.i(7233),c=e.i(55436),x=e.i(27612),h=e.i(88699),m=e.i(50106),o=e.i(70931);function u(e){return"object"==typeof e&&null!==e}function p(e){return"string"==typeof e?e:void 0}function y(e){var s,t;return u(e)?{id:p(e.id),name:p(e.name),scope:p(e.scope),createdByUserId:p(e.createdByUserId),createdAt:"number"==typeof(s=e.createdAt)&&Number.isFinite(s)?s:void 0,tags:Array.isArray(t=e.tags)&&t.every(e=>"string"==typeof e)?t:void 0,lines:Array.isArray(e.lines)?e.lines:void 0}:{}}function j(){let e=(0,m.useAuth)(),j="authenticated"===e.status&&!!e.accessToken,[N,g]=(0,a.useState)("ALL"),[f,v]=(0,a.useState)(""),[I,w]=(0,a.useState)(""),[A,b]=(0,a.useState)(void 0),[S,M]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=window.setTimeout(()=>{w(f.trim()),b(void 0),M([])},300);return()=>window.clearTimeout(e)},[f,N]);let k=(0,o.useAdminListRxPresetsQuery)({query:I||void 0,limit:20,cursor:A},{skip:!j}),[P,B]=(0,o.useAdminDeleteRxPresetMutation)(),C=(0,o.useGetDoctorsQuery)(void 0,{skip:!j}),L=(0,a.useMemo)(()=>{var e;let s=new Map;for(let t of Array.isArray(e=C.data)?e.filter(u):[]){let e=p(t.userId)??p(t.doctorId)??p(t.id),a=p(t.displayName)??p(t.fullName)??p(t.name)??p(t.email);e&&a&&s.set(e,a)}return s},[C.data]),T=k.data?.items??[],D=k.data?.total??0,U=k.data?.nextCursor??null,R=(0,a.useMemo)(()=>{let s=T.map(y);return"ALL"===N?s:s.filter(s=>{let t=s.scope;return"ADMIN"===N?"ADMIN"===t:"PUBLIC"===N?"PUBLIC"===t:"MINE"!==N||!!s.createdByUserId&&s.createdByUserId===e.userId})},[T,N,e.userId]),E=R.length,F=S.length>0,O=!!U,V=(0,a.useMemo)(()=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(d.Select,{value:N,onValueChange:e=>g(e),children:[(0,s.jsx)(d.SelectTrigger,{className:"h-9 w-48 rounded-xl bg-white text-sm",children:(0,s.jsx)(d.SelectValue,{placeholder:"Filter"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"ALL",children:"Show all"}),(0,s.jsx)(d.SelectItem,{value:"MINE",children:"Show my presets"}),(0,s.jsx)(d.SelectItem,{value:"ADMIN",children:"Admin presets"}),(0,s.jsx)(d.SelectItem,{value:"PUBLIC",children:"Public presets"})]})]}),(0,s.jsxs)("div",{className:"relative w-80",children:[(0,s.jsx)(c.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.Input,{className:"h-9 rounded-xl pl-9 text-sm",placeholder:"Search presets…",value:f,onChange:e=>v(e.target.value)})]}),(0,s.jsx)(l.Button,{asChild:!0,className:"h-9 rounded-xl",children:(0,s.jsxs)(t.default,{href:"/admin/rx-presets/new",children:[(0,s.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),"New Preset"]})})]}),[f,N]),K=async(e,s)=>{window.confirm(`Delete preset "${s}"? This cannot be undone.`)&&await P({id:e}).unwrap()};return(0,s.jsxs)("div",{className:"p-4 2xl:p-12",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Rx Presets"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage multi-line prescription templates."})]}),V]}),(0,s.jsxs)(r.Card,{className:"rounded-2xl border bg-white p-0 shadow-none",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 border-b px-5 py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:"Templates"}),(0,s.jsxs)("div",{className:"text-[11px] text-gray-500",children:["Filter: ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:N}),(0,s.jsx)("span",{className:"mx-2",children:"·"}),"Search:"," ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:I||"All"}),(0,s.jsx)("span",{className:"mx-2",children:"·"}),"Showing:"," ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:j?E:"—"}),(0,s.jsx)("span",{className:"mx-2",children:"·"}),"Total: ",(0,s.jsx)("span",{className:"font-medium text-gray-700",children:j?D:"—"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Button,{variant:"secondary",className:"h-9 rounded-xl",onClick:()=>{M(e=>{let s=[...e];return b(s.pop()),s})},disabled:!F||k.isFetching,children:"Prev"}),(0,s.jsx)(l.Button,{variant:"secondary",className:"h-9 rounded-xl",onClick:()=>{U&&(M(e=>[...e,A]),b(U))},disabled:!O||k.isFetching,children:"Next"})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-[11px] font-semibold text-gray-600",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-5 py-3",children:"Preset"}),(0,s.jsx)("th",{className:"px-5 py-3",children:"Scope"}),(0,s.jsx)("th",{className:"px-5 py-3",children:"Lines"}),(0,s.jsx)("th",{className:"px-5 py-3",children:"Tags"}),(0,s.jsx)("th",{className:"px-5 py-3",children:"Source"}),(0,s.jsx)("th",{className:"px-5 py-3",children:"Created by"}),(0,s.jsx)("th",{className:"px-5 py-3",children:"Created at"}),(0,s.jsx)("th",{className:"px-5 py-3 text-right",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"divide-y",children:[!j&&(0,s.jsx)("tr",{className:"text-gray-500",children:(0,s.jsx)("td",{className:"px-5 py-4",colSpan:8,children:"Please log in as admin to view presets."})}),j&&k.isLoading&&(0,s.jsx)("tr",{className:"text-gray-500",children:(0,s.jsx)("td",{className:"px-5 py-4",colSpan:8,children:"Loading…"})}),j&&!k.isLoading&&0===R.length&&(0,s.jsx)("tr",{className:"text-gray-500",children:(0,s.jsx)("td",{className:"px-5 py-4",colSpan:8,children:"No presets found."})}),R.map(e=>{let a=e.id??"",r=e.name??"",i=(e=>{if(!e)return{createdBy:"Admin",source:"ADMIN_IMPORT"};let s=L.get(e);return s?{createdBy:s,source:"INLINE_DOCTOR"}:{createdBy:"Admin",source:"ADMIN_IMPORT"}})(e.createdByUserId),d=e.scope??"PRIVATE",n=e.lines?.length??0,c=(e.tags??[]).length>0?(e.tags??[]).join(", "):"—";return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-5 py-4",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:r}),(0,s.jsxs)("div",{className:"text-[11px] text-gray-500",children:["ID: ",a]})]}),(0,s.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:d}),(0,s.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:n}),(0,s.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:c}),(0,s.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:i.source}),(0,s.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:(0,s.jsx)("div",{className:"font-medium text-gray-900",children:i.createdBy})}),(0,s.jsx)("td",{className:"px-5 py-4 text-[11px] text-gray-700",children:function(e){if(!e||!Number.isFinite(e))return"—";try{return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"—"}}(e.createdAt)}),(0,s.jsx)("td",{className:"px-5 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(l.Button,{asChild:!0,variant:"secondary",className:"h-8 rounded-xl px-3 text-xs",children:(0,s.jsxs)(t.default,{href:`/admin/rx-presets/${a}`,children:[(0,s.jsx)(h.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,s.jsxs)(l.Button,{variant:"destructive",className:"h-8 rounded-xl px-3 text-xs",onClick:()=>K(a,r),disabled:B.isLoading,children:[(0,s.jsx)(x.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})})]},a)})]})]})}),(k.isError||B.isError)&&(0,s.jsx)("div",{className:"px-5 py-3 text-[11px] text-red-600",children:"Something failed. Check network tab / API logs."})]})]})}e.s(["default",()=>j])}]);