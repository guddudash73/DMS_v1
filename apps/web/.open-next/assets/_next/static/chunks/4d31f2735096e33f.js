(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5422,e=>{"use strict";var s=e.i(43476),r=e.i(18566),a=e.i(53145),t=e.i(94814),d=e.i(70319),l=e.i(64712),i=e.i(66691),n=e.i(24911),o=e.i(25466),c=e.i(70317),m=e.i(6662),x=e.i(70931);function h(){let e=(0,r.useRouter)(),[h,{isLoading:u}]=(0,x.useCreatePatientMutation)(),{register:p,handleSubmit:g,formState:{errors:b,isSubmitting:y}}=(0,a.useForm)({resolver:(0,t.zodResolver)(l.PatientCreate),mode:"onBlur",defaultValues:{name:"",phone:"",dob:"",gender:void 0,address:""}}),j=async s=>{try{let r=await h(s).unwrap();d.toast.success("Patient created successfully."),e.push(`/patients/${r.patientId}`)}catch(a){var r;let e=(r=a.data)&&"object"==typeof r&&"string"==typeof r.error?{error:r.error,message:"string"==typeof r.message?r.message:void 0,fieldErrors:r.fieldErrors&&"object"==typeof r.fieldErrors?r.fieldErrors:void 0,traceId:"string"==typeof r.traceId?r.traceId:void 0}:null,s=e?.message??(409===a.status?"A patient already exists with this name and phone.":"Unable to save patient. Please try again.");d.toast.error(s)}};return(0,s.jsx)("section",{className:"relative h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:(0,s.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:(0,s.jsxs)(c.Card,{className:"w-full max-w-xl rounded-2xl border-none bg-white shadow-lg",children:[(0,s.jsx)(c.CardHeader,{className:"pb-4",children:(0,s.jsx)(c.CardTitle,{className:"text-xl font-semibold text-gray-900",children:"Create Patient"})}),(0,s.jsx)(c.CardContent,{className:"pt-0",children:(0,s.jsxs)("form",{className:"grid gap-4",onSubmit:g(j,e=>{let s=Object.values(e).map(e=>e?.message).filter(e=>!!e);d.toast.error(s.length?s.join("\n"):"Please check the highlighted fields.")}),noValidate:!0,children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.Label,{htmlFor:"name",className:"text-sm font-medium text-gray-800",children:"Name"}),(0,s.jsx)(n.Input,{id:"name",autoFocus:!0,placeholder:"Enter patient name...",className:`h-10 rounded-xl text-sm ${b.name?"border-red-500 focus-visible:ring-red-500":"border-gray-200 focus-visible:ring-gray-300"}`,...p("name")}),(0,s.jsx)("p",{className:"h-3 text-xs",children:" "})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.Label,{htmlFor:"phone",className:"text-sm font-medium text-gray-800",children:"Contact No."}),(0,s.jsx)(n.Input,{id:"phone",inputMode:"tel",placeholder:"Enter contact number...",className:`h-10 rounded-xl text-sm ${b.phone?"border-red-500 focus-visible:ring-red-500":"border-gray-200 focus-visible:ring-gray-300"}`,...p("phone")}),(0,s.jsx)("p",{className:"h-3 text-xs",children:" "})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.Label,{htmlFor:"gender",className:"text-sm font-medium text-gray-800",children:"Gender"}),(0,s.jsxs)("select",{id:"gender",className:`h-10 w-full rounded-xl border bg-white px-3 text-sm ${b.gender?"border-red-500 focus-visible:ring-red-500":"border-gray-200 focus-visible:ring-gray-300"}`,...p("gender"),children:[(0,s.jsx)("option",{value:"",children:"Choose a category"}),(0,s.jsx)("option",{value:"MALE",children:"Male"}),(0,s.jsx)("option",{value:"FEMALE",children:"Female"}),(0,s.jsx)("option",{value:"OTHER",children:"Other"}),(0,s.jsx)("option",{value:"UNKNOWN",children:"Unknown"})]}),(0,s.jsx)("p",{className:"h-3 text-xs",children:" "})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.Label,{htmlFor:"dob",className:"text-sm font-medium text-gray-800",children:"DOB"}),(0,s.jsx)(n.Input,{id:"dob",type:"date",placeholder:"dd-mm-yyyy",className:`h-10 rounded-xl text-sm ${b.dob?"border-red-500 focus-visible:ring-red-500":"border-gray-200 focus-visible:ring-gray-300"}`,...p("dob")}),(0,s.jsx)("p",{className:"h-3 text-xs",children:" "})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.Label,{htmlFor:"address",className:"text-sm font-medium text-gray-800",children:"Address"}),(0,s.jsx)(m.Textarea,{id:"address",placeholder:"Type patient address here...",className:`min-h-22.5 rounded-xl text-sm ${b.address?"border-red-500 focus-visible:ring-red-500":"border-gray-200 focus-visible:ring-gray-300"}`,...p("address")}),(0,s.jsx)("p",{className:"h-3 text-xs",children:" "})]}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(i.Button,{type:"button",variant:"ghost",className:"h-10 rounded-xl px-4 text-sm",onClick:()=>e.back(),children:"Cancel"}),(0,s.jsx)(i.Button,{type:"submit",disabled:y||u,className:"h-10 rounded-xl bg-black px-6 text-sm font-medium text-white hover:bg-black/90",children:y||u?"Creating…":"Create Patient"})]})]})})]})})})}e.s(["default",()=>h])}]);