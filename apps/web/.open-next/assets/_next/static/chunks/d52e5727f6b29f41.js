(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23621,e=>{"use strict";var t=e.i(43476),r=e.i(91918),a=e.i(25913),s=e.i(52236);let n=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:a,asChild:o=!1,...l}){let i=o?r.Slot:"span";return(0,t.jsx)(i,{"data-slot":"badge",className:(0,s.cn)(n({variant:a}),e),...l})}e.s(["Badge",()=>o])},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},69262,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(81140),s=e.i(20783),n=e.i(26330),o=e.i(3536),l=e.i(65491),i=e.i(10772),d=e.i(53660),c=e.i(74606),u=e.i(96626);function p(e){var a;let n,o=(a=e,(n=r.forwardRef((e,t)=>{let{children:a,...n}=e;if(r.isValidElement(a)){var o;let e,l,i=(o=a,(l=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(l=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),d=function(e,t){let r={...t};for(let a in t){let s=e[a],n=t[a];/^on[A-Z]/.test(a)?s&&n?r[a]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...n}:"className"===a&&(r[a]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(n,a.props);return a.type!==r.Fragment&&(d.ref=t?(0,s.composeRefs)(t,i):i),r.cloneElement(a,d)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName=`${a}.SlotClone`,n),l=r.forwardRef((e,a)=>{let{children:s,...n}=e,l=r.Children.toArray(s),i=l.find(m);if(i){let e=i.props.children,s=l.map(t=>t!==i?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(o,{...n,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,t.jsx)(o,{...n,ref:a,children:s})});return l.displayName=`${e}.Slot`,l}e.i(74080);var x=Symbol("radix.slottable");function m(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===x}var g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=p(`Primitive.${a}`),n=r.forwardRef((e,r)=>{let{asChild:n,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?s:a,{...o,ref:r})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),f=e.i(69340),h=e.i(86312),v=e.i(85369),b="Popover",[y,j]=function(e,a=[]){let s=[],n=()=>{let t=s.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return n.scopeName=e,[function(a,n){let o=r.createContext(n),l=s.length;s=[...s,n];let i=a=>{let{scope:s,children:n,...i}=a,d=s?.[e]?.[l]||o,c=r.useMemo(()=>i,Object.values(i));return(0,t.jsx)(d.Provider,{value:c,children:n})};return i.displayName=a+"Provider",[i,function(t,s){let i=s?.[e]?.[l]||o,d=r.useContext(i);if(d)return d;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(n,...a)]}(b,[d.createPopperScope]),N=(0,d.createPopperScope)(),[w,C]=y(b),k=e=>{let{__scopePopover:a,children:s,open:n,defaultOpen:o,onOpenChange:l,modal:c=!1}=e,u=N(a),p=r.useRef(null),[x,m]=r.useState(!1),[g,h]=(0,f.useControllableState)({prop:n,defaultProp:o??!1,onChange:l,caller:b});return(0,t.jsx)(d.Root,{...u,children:(0,t.jsx)(w,{scope:a,contentId:(0,i.useId)(),triggerRef:p,open:g,onOpenChange:h,onOpenToggle:r.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:x,onCustomAnchorAdd:r.useCallback(()=>m(!0),[]),onCustomAnchorRemove:r.useCallback(()=>m(!1),[]),modal:c,children:s})})};k.displayName=b;var P="PopoverAnchor";r.forwardRef((e,a)=>{let{__scopePopover:s,...n}=e,o=C(P,s),l=N(s),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=o;return r.useEffect(()=>(i(),()=>c()),[i,c]),(0,t.jsx)(d.Anchor,{...l,...n,ref:a})}).displayName=P;var _="PopoverTrigger",R=r.forwardRef((e,r)=>{let{__scopePopover:n,...o}=e,l=C(_,n),i=N(n),c=(0,s.useComposedRefs)(r,l.triggerRef),u=(0,t.jsx)(g.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":L(l.open),...o,ref:c,onClick:(0,a.composeEventHandlers)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?u:(0,t.jsx)(d.Anchor,{asChild:!0,...i,children:u})});R.displayName=_;var D="PopoverPortal",[T,A]=y(D,{forceMount:void 0}),E=e=>{let{__scopePopover:r,forceMount:a,children:s,container:n}=e,o=C(D,r);return(0,t.jsx)(T,{scope:r,forceMount:a,children:(0,t.jsx)(u.Presence,{present:a||o.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:n,children:s})})})};E.displayName=D;var O="PopoverContent",S=r.forwardRef((e,r)=>{let a=A(O,e.__scopePopover),{forceMount:s=a.forceMount,...n}=e,o=C(O,e.__scopePopover);return(0,t.jsx)(u.Presence,{present:s||o.open,children:o.modal?(0,t.jsx)(B,{...n,ref:r}):(0,t.jsx)(z,{...n,ref:r})})});S.displayName=O;var I=p("PopoverContent.RemoveScroll"),B=r.forwardRef((e,n)=>{let o=C(O,e.__scopePopover),l=r.useRef(null),i=(0,s.useComposedRefs)(n,l),d=r.useRef(!1);return r.useEffect(()=>{let e=l.current;if(e)return(0,h.hideOthers)(e)},[]),(0,t.jsx)(v.RemoveScroll,{as:I,allowPinchZoom:!0,children:(0,t.jsx)(M,{...e,ref:i,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),d.current||o.triggerRef.current?.focus()}),onPointerDownOutside:(0,a.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;d.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,a.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),z=r.forwardRef((e,a)=>{let s=C(O,e.__scopePopover),n=r.useRef(!1),o=r.useRef(!1);return(0,t.jsx)(M,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||s.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));let r=t.target;s.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),M=r.forwardRef((e,r)=>{let{__scopePopover:a,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:m,onInteractOutside:g,...f}=e,h=C(O,a),v=N(a);return(0,o.useFocusGuards)(),(0,t.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:c,children:(0,t.jsx)(n.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:g,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:m,onDismiss:()=>h.onOpenChange(!1),children:(0,t.jsx)(d.Content,{"data-state":L(h.open),role:"dialog",id:h.contentId,...v,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),F="PopoverClose";function L(e){return e?"open":"closed"}r.forwardRef((e,r)=>{let{__scopePopover:s,...n}=e,o=C(F,s);return(0,t.jsx)(g.button,{type:"button",...n,ref:r,onClick:(0,a.composeEventHandlers)(e.onClick,()=>o.onOpenChange(!1))})}).displayName=F,r.forwardRef((e,r)=>{let{__scopePopover:a,...s}=e,n=N(a);return(0,t.jsx)(d.Arrow,{...n,...s,ref:r})}).displayName="PopoverArrow";var $=e.i(52236);function V({...e}){return(0,t.jsx)(k,{"data-slot":"popover",...e})}function H({...e}){return(0,t.jsx)(R,{"data-slot":"popover-trigger",...e})}function U({className:e,align:r="center",sideOffset:a=4,...s}){return(0,t.jsx)(E,{children:(0,t.jsx)(S,{"data-slot":"popover-content",align:r,sideOffset:a,className:(0,$.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...s})})}e.s(["Popover",()=>V,"PopoverContent",()=>U,"PopoverTrigger",()=>H],69262)},46349,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["default",()=>t])},34164,29978,33565,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(9797);let s=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeftIcon",()=>s],29978);var n=e.i(46349);e.s(["ChevronRightIcon",()=>n.default],33565);var n=n,o=e.i(97791),l=e.i(75760),i=e.i(52236),d=e.i(66691);function c({className:e,classNames:r,showOutsideDays:c=!0,captionLayout:p="label",buttonVariant:x="ghost",formatters:m,components:g,...f}){let h=(0,l.getDefaultClassNames)();return(0,t.jsx)(o.DayPicker,{showOutsideDays:c,className:(0,i.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:p,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...m},classNames:{root:(0,i.cn)("w-fit",h.root),months:(0,i.cn)("flex gap-4 flex-col md:flex-row relative",h.months),month:(0,i.cn)("flex flex-col w-full gap-4",h.month),nav:(0,i.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",h.nav),button_previous:(0,i.cn)((0,d.buttonVariants)({variant:x}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",h.button_previous),button_next:(0,i.cn)((0,d.buttonVariants)({variant:x}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",h.button_next),month_caption:(0,i.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",h.month_caption),dropdowns:(0,i.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",h.dropdowns),dropdown_root:(0,i.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",h.dropdown_root),dropdown:(0,i.cn)("absolute bg-popover inset-0 opacity-0",h.dropdown),caption_label:(0,i.cn)("select-none font-medium","label"===p?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",h.caption_label),table:"w-full border-collapse",weekdays:(0,i.cn)("flex",h.weekdays),weekday:(0,i.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",h.weekday),week:(0,i.cn)("flex w-full mt-2",h.week),week_number_header:(0,i.cn)("select-none w-(--cell-size)",h.week_number_header),week_number:(0,i.cn)("text-[0.8rem] select-none text-muted-foreground",h.week_number),day:(0,i.cn)("relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",f.showWeekNumber?"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md":"[&:first-child[data-selected=true]_button]:rounded-l-md",h.day),range_start:(0,i.cn)("rounded-l-md bg-accent",h.range_start),range_middle:(0,i.cn)("rounded-none",h.range_middle),range_end:(0,i.cn)("rounded-r-md bg-accent",h.range_end),today:(0,i.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",h.today),outside:(0,i.cn)("text-muted-foreground aria-selected:text-muted-foreground",h.outside),disabled:(0,i.cn)("text-muted-foreground opacity-50",h.disabled),hidden:(0,i.cn)("invisible",h.hidden),...r},components:{Root:({className:e,rootRef:r,...a})=>(0,t.jsx)("div",{"data-slot":"calendar",ref:r,className:(0,i.cn)(e),...a}),Chevron:({className:e,orientation:r,...o})=>"left"===r?(0,t.jsx)(s,{className:(0,i.cn)("size-4",e),...o}):"right"===r?(0,t.jsx)(n.default,{className:(0,i.cn)("size-4",e),...o}):(0,t.jsx)(a.ChevronDownIcon,{className:(0,i.cn)("size-4",e),...o}),DayButton:u,WeekNumber:({children:e,...r})=>(0,t.jsx)("td",{...r,children:(0,t.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:e})}),...g},...f})}function u({className:e,day:a,modifiers:s,...n}){let o=(0,l.getDefaultClassNames)(),c=r.useRef(null);return r.useEffect(()=>{s.focused&&c.current?.focus()},[s.focused]),(0,t.jsx)(d.Button,{ref:c,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":s.selected&&!s.range_start&&!s.range_end&&!s.range_middle,"data-range-start":s.range_start,"data-range-end":s.range_end,"data-range-middle":s.range_middle,className:(0,i.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",o.day,e),...n})}e.s(["Calendar",()=>c,"CalendarDayButton",()=>u],34164)},7064,e=>{"use strict";var t=e.i(43476),r=e.i(52236);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...a})})}function s({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...a})}function n({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...a})}function o({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function l({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function i({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>n,"TableCell",()=>i,"TableHead",()=>l,"TableHeader",()=>s,"TableRow",()=>o])},23816,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(70931),n=e.i(66691),o=e.i(70317),l=e.i(23621),i=e.i(7064),d=e.i(69262),c=e.i(34164),u=e.i(72520),p=e.i(87316),x=e.i(32595);let m=e=>e&&"object"==typeof e&&"string"==typeof e.error?{error:e.error,message:"string"==typeof e.message?e.message:void 0,fieldErrors:e.fieldErrors&&"object"==typeof e.fieldErrors?e.fieldErrors:void 0,traceId:"string"==typeof e.traceId?e.traceId:void 0}:null,g=e=>(0,x.formatClinicDateShort)(e);function f(e){let{page:r,totalPages:a,onPageChange:s}=e,o=r>1,l=r<a;return(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",className:"h-9 rounded-xl px-3 text-xs",disabled:!o,onClick:()=>s(r-1),children:"Previous"}),(0,t.jsxs)("div",{className:"px-2 text-xs text-gray-600",children:["Page ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:r})," of"," ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:a})]}),(0,t.jsx)(n.Button,{type:"button",variant:"outline",className:"h-9 rounded-xl px-3 text-xs",disabled:!l,onClick:()=>s(r+1),children:"Next"})]})}function h(e){return"QUEUED"===e?"Waiting":"IN_PROGRESS"===e?"In Progress":"DONE"===e?"Done":"—"}function v(e){return"QUEUED"===e?"bg-pink-100 text-pink-700 border-pink-200":"IN_PROGRESS"===e?"bg-yellow-100 text-yellow-800 border-yellow-200":"DONE"===e?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200"}function b(e){let t=e?.anchorVisitId,r="string"==typeof t?t:null;return r&&r.length>0?r:null}function y(e){return e?.zeroBilled===!0}function j(e){return(e.reason||"").trim()||"—"}function N(){let e=(0,a.useParams)(),N=e?.id,w=(0,a.useRouter)();if(!N||"string"!=typeof N)return(0,t.jsx)("section",{className:"p-6",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:"Invalid patient id in URL."})});let{data:C,isLoading:k,error:P}=(0,s.useGetPatientByIdQuery)(N),{data:_,isLoading:R,error:D}=(0,s.useGetPatientVisitsQuery)(N),{data:T}=(0,s.useGetPatientSummaryQuery)(N),[A,E]=r.useState(""),O=r.useMemo(()=>{if(!A||!/^\d{4}-\d{2}-\d{2}$/.test(A))return;let[e,t,r]=A.split("-").map(Number),a=new Date(e,t-1,r,0,0,0,0);return Number.isNaN(a.getTime())?void 0:a},[A]),[S,I]=r.useState(!1),B=r.useMemo(()=>{if(!P)return null;let e=m(P.data);return e?.message??"Unable to load patient."},[P]),z=r.useMemo(()=>{if(!D)return null;let e=m(D.data);return e?.message??"Unable to load visits."},[D]),M=_?.items??[],F=r.useMemo(()=>{let e=[...M];return e.sort((e,t)=>(t.updatedAt??t.createdAt??0)-(e.updatedAt??e.createdAt??0)),e},[M]),L=r.useMemo(()=>A?F.filter(e=>e.visitDate===A):F,[F,A]),$=r.useMemo(()=>{let e=new Map;for(let t of F)e.set(t.visitId,t);return e},[F]),V=r.useMemo(()=>{let e=new Map,t=new Map;for(let r of L){if("NEW"===function(e){let t=b(e);return t&&t!==e.visitId?"FOLLOWUP":"NEW"}(r)){e.set(r.visitId,r),t.has(r.visitId)||t.set(r.visitId,[]);continue}let a=b(r);if(!a)continue;let s=t.get(a)??[];s.push(r),t.set(a,s)}for(let[r]of t)if(!e.has(r)){let t=$.get(r);t&&e.set(r,t)}let r=Array.from(e.values()).sort((e,t)=>{let r=e.visitDate||"",a=t.visitDate||"";return r!==a?a.localeCompare(r):(t.updatedAt??t.createdAt??0)-(e.updatedAt??e.createdAt??0)});for(let[e,r]of t)r.sort((e,t)=>(e.updatedAt??e.createdAt??0)-(t.updatedAt??t.createdAt??0)),t.set(e,r);return{anchorsOrdered:r,followupsByAnchor:t}},[L,$]),[H,U]=r.useState(1);r.useEffect(()=>{U(1)},[A,_?.items]);let W=Math.max(1,Math.ceil(V.anchorsOrdered.length/4)),G=Math.min(H,W),Q=r.useMemo(()=>{let e=(G-1)*4;return V.anchorsOrdered.slice(e,e+4)},[V.anchorsOrdered,G]),q=e=>{w.push(`/doctor/visits/${e}`)};return(0,t.jsxs)("section",{className:"h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:[(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsxs)(o.Card,{className:"rounded-2xl border-none bg-white px-8 py-8 shadow-sm",children:[(0,t.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Patient Details:"}),k&&(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-600","aria-busy":"true",children:[(0,t.jsx)("div",{className:"h-4 w-40 animate-pulse rounded bg-gray-100"}),(0,t.jsx)("div",{className:"h-4 w-32 animate-pulse rounded bg-gray-100"}),(0,t.jsx)("div",{className:"h-4 w-24 animate-pulse rounded bg-gray-100"})]}),!k&&B&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:B}),!k&&!B&&C&&(0,t.jsxs)("div",{className:"grid gap-4 text-sm text-gray-800 md:grid-cols-2",children:[(0,t.jsxs)("dl",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-28 shrink-0 text-gray-600",children:"Name"}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[": ",C.name]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-28 shrink-0 text-gray-600",children:"DOB/Sex"}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[": ",C.dob??"—"," / ",C.gender??"—"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-28 shrink-0 text-gray-600",children:"Contact No."}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[": ",C.phone??"—"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-28 shrink-0 text-gray-600",children:"Address"}),(0,t.jsxs)("dd",{className:"whitespace-pre-line text-gray-900",children:[": ",C.address??"—"]})]})]}),(0,t.jsxs)("dl",{className:"space-y-2 md:justify-self-end",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-32 shrink-0 text-gray-600",children:"Regd. Date"}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[":"," ",C.createdAt?new Date(C.createdAt).toLocaleDateString("en-GB"):"—"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-32 shrink-0 text-gray-600",children:"SD-ID"}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[": ",C.sdId]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-32 shrink-0 text-gray-600",children:"Visits count"}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[": ",T?.doneVisitCount??0]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("dt",{className:"w-32 shrink-0 text-gray-600",children:"Last Visit"}),(0,t.jsxs)("dd",{className:"text-gray-900",children:[": ",T?.lastVisitDate??"—"]})]})]})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-end gap-6",children:(0,t.jsxs)(d.Popover,{open:S,onOpenChange:I,children:[(0,t.jsx)(d.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{type:"button",variant:"outline",className:"h-9 rounded-full border-gray-200 bg-white px-4 text-xs text-gray-800 hover:bg-gray-100",children:[(0,t.jsx)(p.Calendar,{className:"mr-2 h-4 w-4"}),A?g(A):"Pick a date"]})}),(0,t.jsxs)(d.PopoverContent,{align:"end",className:"w-auto rounded-2xl p-2",children:[(0,t.jsx)(c.Calendar,{mode:"single",selected:O,onSelect:e=>{e?(E((0,x.clinicDateISO)(e)),I(!1)):E("")}}),A?(0,t.jsx)("div",{className:"flex justify-end px-2 pb-2 pt-1",children:(0,t.jsx)(n.Button,{type:"button",variant:"ghost",className:"h-8 rounded-xl px-3 text-xs",onClick:()=>{E(""),I(!1)},children:"Clear"})}):null]})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)(o.Card,{className:"overflow-hidden rounded-2xl border-none bg-white px-0 py-0 shadow-sm",children:[(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{className:"bg-gray-50",children:[(0,t.jsx)(i.TableHead,{className:"px-6 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Visit Date"}),(0,t.jsx)(i.TableHead,{className:"px-6 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Reason"}),(0,t.jsx)(i.TableHead,{className:"px-6 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Type"}),(0,t.jsx)(i.TableHead,{className:"px-6 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Stage"}),(0,t.jsx)(i.TableHead,{className:"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Action"})]})}),(0,t.jsx)(i.TableBody,{children:R?(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:5,className:"px-6 py-10 text-center text-sm text-gray-500",children:"Loading visits…"})}):z?(0,t.jsx)(i.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:5,className:"px-6 py-10 text-center text-sm text-red-600",children:z})}):0===Q.length?(0,t.jsx)(i.TableRow,{children:(0,t.jsxs)(i.TableCell,{colSpan:5,className:"px-6 py-10 text-center text-sm text-gray-500",children:["No visits found",A?` for ${A}`:"","."]})}):Q.map(e=>{var a;let s=e.visitId,o=V.followupsByAnchor.get(s)??[];return(0,t.jsxs)(r.Fragment,{children:[(0,t.jsxs)(i.TableRow,{className:"hover:bg-gray-50/60",children:[(0,t.jsx)(i.TableCell,{className:"px-6 py-4 text-sm font-medium text-gray-900",children:g(e.visitDate)}),(0,t.jsxs)(i.TableCell,{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:j(e)}),(0,t.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:(a=o.length)<=0?"No follow-ups":1===a?"1 follow-up":`${a} follow-ups`})]}),(0,t.jsx)(i.TableCell,{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(l.Badge,{variant:"outline",className:"rounded-full border-sky-200 bg-sky-50 px-3 py-1 text-[11px] font-semibold text-sky-700",children:"NEW"}),y(e)?(0,t.jsx)(l.Badge,{variant:"outline",className:"rounded-full border-rose-200 bg-rose-50 px-3 py-1 text-[11px] font-semibold text-rose-700",children:"ZERO BILLED"}):null]})}),(0,t.jsx)(i.TableCell,{className:"px-6 py-4",children:(0,t.jsx)(l.Badge,{variant:"outline",className:`rounded-full px-4 py-1 text-xs font-semibold ${v(e.status)}`,children:h(e.status)})}),(0,t.jsx)(i.TableCell,{className:"px-6 py-4 text-right",children:(0,t.jsxs)(n.Button,{type:"button",variant:"outline",className:"h-9 rounded-xl px-3 text-xs",onClick:()=>q(e.visitId),children:["View ",(0,t.jsx)(u.ArrowRight,{className:"ml-1 h-4 w-4"})]})})]}),o.map(r=>{let a=$.get(b(r)??"")??e;return(0,t.jsxs)(i.TableRow,{className:"bg-white hover:bg-gray-50/60",children:[(0,t.jsx)(i.TableCell,{className:"px-6 py-2 align-top",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"mt-0.5 h-8 w-0.5 rounded-full bg-gray-200"}),(0,t.jsx)("div",{className:"text-[13px] font-medium text-gray-900",children:g(r.visitDate)})]})}),(0,t.jsxs)(i.TableCell,{className:"px-6 py-2 align-top",children:[(0,t.jsx)("div",{className:"text-[13px] font-semibold text-gray-900",children:j(r)}),(0,t.jsx)("div",{className:"mt-0.5 text-[10px] text-gray-500",children:function(e,t){if(!t)return"Follow-up of: —";let r=j(t),a=t.visitDate?g(t.visitDate):"—";return`Follow-up of: ${r} • ${a}`}(0,a)})]}),(0,t.jsx)(i.TableCell,{className:"px-6 py-2 align-top",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(l.Badge,{variant:"outline",className:"rounded-full border-violet-200 bg-violet-50 px-3 py-1 text-[10px] font-semibold text-violet-700",children:"FOLLOW UP"}),y(r)?(0,t.jsx)(l.Badge,{variant:"outline",className:"rounded-full border-rose-200 bg-rose-50 px-3 py-1 text-[10px] font-semibold text-rose-700",children:"ZERO BILLED"}):null]})}),(0,t.jsx)(i.TableCell,{className:"px-6 py-2 align-top",children:(0,t.jsx)(l.Badge,{variant:"outline",className:`rounded-full px-4 py-1 text-[11px] font-semibold ${v(r.status)}`,children:h(r.status)})}),(0,t.jsx)(i.TableCell,{className:"px-6 py-2 text-right align-top",children:(0,t.jsxs)(n.Button,{type:"button",variant:"outline",className:"h-8 rounded-xl px-3 text-xs",onClick:()=>q(r.visitId),children:["View ",(0,t.jsx)(u.ArrowRight,{className:"ml-1 h-4 w-4"})]})})]},r.visitId)})]},s)})})]}),V.anchorsOrdered.length>4?(0,t.jsx)("div",{className:"border-t bg-white px-4 py-3",children:(0,t.jsx)(f,{page:G,totalPages:W,onPageChange:U})}):null]})})]})]})}e.s(["default",()=>N])}]);