(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64390,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),a=e.i(70317),i=e.i(66691),n=e.i(52236),d=e.i(50106),r=e.i(70931),c=e.i(32595);function m(e){return"number"!=typeof e?"—":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}function o(e){return"number"==typeof e&&Number.isFinite(e)?e:0}function x({label:e,value:t,loading:l}){return(0,s.jsxs)("div",{className:"rounded-2xl bg-slate-50 px-5 py-4",children:[(0,s.jsx)("div",{className:"text-[11px] text-muted-foreground",children:e}),(0,s.jsx)("div",{className:(0,n.cn)("mt-1 text-2xl font-semibold tracking-tight",l&&"opacity-70"),children:l?"…":t})]})}function u(){let e=(0,l.useRouter)(),n=(0,l.useSearchParams)(),u=(0,d.useAuth)(),h="authenticated"===u.status&&!!u.accessToken;(0,r.useClinicRealtimeQuery)(void 0,{skip:!h});let p=t.useMemo(()=>{let e=n.get("date")?.trim();return e&&/^\d{4}-\d{2}-\d{2}$/.test(e)?e:(0,c.clinicDateISO)(new Date)},[n]),g=(0,r.useGetDailyPaymentsBreakdownQuery)(p,{skip:!h}),j=g.isLoading||g.isFetching,f=g.data?.totals,N=o(f?.total),v=o(f?.online),b=o(f?.offline),y=o(f?.other),w=t.useMemo(()=>{let e=(g.data?.items??[]).slice();return e.sort((e,s)=>(s.createdAt??0)-(e.createdAt??0)),e},[g.data?.items]);return(0,s.jsx)("section",{className:"h-full px-3 py-4 md:px-6 md:py-6 2xl:px-10 2xl:py-10",children:(0,s.jsx)("div",{className:"mx-auto flex h-full w-full max-w-300 flex-col gap-6 2xl:gap-10",children:(0,s.jsx)(a.Card,{className:"rounded-2xl border-none bg-white shadow-sm",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Payments received"}),(0,s.jsx)("div",{className:"mt-1 text-3xl font-semibold tracking-tight",children:(0,c.formatClinicDatePretty)(p)}),(0,s.jsx)("div",{className:"mt-2 text-sm text-muted-foreground",children:"All checked-out visits with payment mode (Online / Offline / Other)."})]}),(0,s.jsx)(i.Button,{type:"button",variant:"outline",className:"rounded-full px-4",onClick:()=>e.back(),children:"← Back"})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(x,{label:"Total",value:m(N),loading:j}),(0,s.jsx)(x,{label:"Online",value:m(v),loading:j}),(0,s.jsx)(x,{label:"Offline",value:m(b),loading:j}),(0,s.jsx)(x,{label:"Other",value:m(y),loading:j})]}),(0,s.jsx)("div",{className:"mt-6",children:g.isError?(0,s.jsx)("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:"Couldn't load payments for this date."}):j?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"h-16 w-full animate-pulse rounded-2xl bg-slate-100"}),(0,s.jsx)("div",{className:"h-16 w-full animate-pulse rounded-2xl bg-slate-100"}),(0,s.jsx)("div",{className:"h-16 w-full animate-pulse rounded-2xl bg-slate-100"})]}):0===w.length?(0,s.jsx)("div",{className:"rounded-2xl border bg-white px-4 py-4 text-sm text-muted-foreground",children:"No checked-out payments found for this day."}):(0,s.jsxs)("div",{className:"overflow-hidden rounded-2xl border bg-white",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 bg-slate-50 px-4 py-2 text-[11px] font-semibold text-slate-600",children:[(0,s.jsx)("div",{className:"col-span-5",children:"Patient"}),(0,s.jsx)("div",{className:"col-span-4",children:"Reason"}),(0,s.jsx)("div",{className:"col-span-2",children:"Mode"}),(0,s.jsx)("div",{className:"col-span-1 text-right",children:"Amount"})]}),(0,s.jsx)("div",{className:"divide-y",children:w.map(e=>{var t;let l;return(0,s.jsxs)("div",{className:"grid grid-cols-12 px-4 py-3",children:[(0,s.jsxs)("div",{className:"col-span-5 min-w-0",children:[(0,s.jsx)("div",{className:"truncate text-sm font-semibold",children:e.patientName}),(0,s.jsxs)("div",{className:"mt-0.5 flex flex-wrap items-center gap-x-3 gap-y-1 text-[11px] text-muted-foreground",children:[e.patientPhone?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Phone:"})," ",e.patientPhone]}):null,e.patientGender?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Gender:"})," ",e.patientGender]}):null,(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-slate-700",children:"Time:"})," ","number"==typeof e.createdAt?(0,c.formatClinicTimeFromMs)(e.createdAt):"—"]})]})]}),(0,s.jsxs)("div",{className:"col-span-4 min-w-0",children:[(0,s.jsx)("div",{className:"truncate text-sm text-slate-700",children:e.reason??"—"}),(0,s.jsxs)("div",{className:"mt-0.5 text-[11px] text-muted-foreground",children:["Visit: ",(0,s.jsxs)("span",{className:"font-mono",children:[e.visitId.slice(0,8),"…"]})]})]}),(0,s.jsx)("div",{className:"col-span-2 flex items-start",children:(0,s.jsx)("span",{className:(t=e.paymentMode,l="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ring-1 ring-inset","ONLINE"===t?`${l} bg-emerald-50 text-emerald-700 ring-emerald-200`:"OFFLINE"===t?`${l} bg-amber-50 text-amber-700 ring-amber-200`:`${l} bg-slate-50 text-slate-700 ring-slate-200`),children:e.paymentMode})}),(0,s.jsx)("div",{className:"col-span-1 text-right",children:(0,s.jsx)("div",{className:"text-sm font-semibold tabular-nums",children:m(e.billingAmount)})})]},e.visitId)})})]})})]})})})})}e.s(["default",()=>u])}]);