(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,s)=>{},98547,(e,t,s)=>{var i=e.i(47167);e.r(16015);var r=e.r(71645),n=r&&"object"==typeof r&&"default"in r?r:{default:r},a=void 0!==i.default&&i.default.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},d=function(){function e(e){var t=void 0===e?{}:e,s=t.name,i=void 0===s?"stylesheet":s,r=t.optimizeForSpeed,n=void 0===r?a:r;o(l(i),"`name` must be a string"),this._name=i,this._deletedRulePlaceholder="#"+i+"-deleted-rule____{}",o("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var d="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=d?d.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){o("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),o(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(o(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(o(l(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var i=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,i))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(i){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var i=this._tags[e];o(i,"old rule at index `"+e+"` not found"),i.textContent=t}return e},s.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];o(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&o(l(t),"makeStyleTag accepts only strings as second parameter");var i=document.createElement("style");this._nonce&&i.setAttribute("nonce",this._nonce),i.type="text/css",i.setAttribute("data-"+e,""),t&&i.appendChild(document.createTextNode(t));var r=document.head||document.getElementsByTagName("head")[0];return s?r.insertBefore(i,s):r.appendChild(i),i},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();function o(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},u={};function m(e,t){if(!t)return"jsx-"+e;var s=String(t),i=e+s;return u[i]||(u[i]="jsx-"+c(e+"-"+s)),u[i]}function h(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return u[s]||(u[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[s]}var p=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,i=void 0===s?null:s,r=t.optimizeForSpeed,n=void 0!==r&&r;this._sheet=i||new d({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),i&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),i=s.styleId,r=s.rules;if(i in this._instancesCounts){this._instancesCounts[i]+=1;return}var n=r.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[i]=n,this._instancesCounts[i]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var i=this._fromServer&&this._fromServer[s];i?(i.parentNode.removeChild(i),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],i=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:i}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,i=e.id;if(s){var r=m(i,s);return{styleId:r,rules:Array.isArray(t)?t.map(function(e){return h(r,e)}):[h(r,t)]}}return{styleId:m(i),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=r.createContext(null);function f(){return new p}function g(){return r.useContext(x)}x.displayName="StyleSheetContext";var j=n.default.useInsertionEffect||n.default.useLayoutEffect,v="undefined"!=typeof window?f():void 0;function b(e){var t=v||g();return t&&("undefined"==typeof window?t.add(e):j(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}b.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},s.StyleRegistry=function(e){var t=e.registry,s=e.children,i=r.useContext(x),a=r.useState(function(){return i||t||f()})[0];return n.default.createElement(x.Provider,{value:a},s)},s.createStyleRegistry=f,s.style=b,s.useStyleRegistry=g},21373,(e,t,s)=>{t.exports=e.r(98547).style},73888,e=>{"use strict";var t=e.i(43476),s=e.i(21373),i=e.i(71645),r=e.i(18566),n=e.i(70319),a=e.i(66691),l=e.i(70317),d=e.i(6662),o=e.i(34164),c=e.i(69262),u=e.i(46762),m=e.i(74080),h=e.i(57688),p=e.i(70931);function x({xrayId:e}){let{data:s}=(0,p.useGetXrayUrlQuery)({xrayId:e,size:"original"});return(0,t.jsx)("div",{className:"h-full w-full",children:s?.url?(0,t.jsx)(h.default,{src:s.url,alt:"X-ray",fill:!0,className:"object-contain",unoptimized:!0,priority:!0}):(0,t.jsx)("div",{className:"h-full w-full bg-gray-100"})})}function f(e){let{open:s,xrayIds:r,onAfterPrint:n}=e,[a,l]=(0,i.useState)(!1);(0,i.useEffect)(()=>l(!0),[]),(0,i.useEffect)(()=>{if(!s)return;let e=()=>{document.body.classList.remove("print-xray"),window.removeEventListener("afterprint",e),n?.()};window.addEventListener("afterprint",e),document.body.classList.add("print-xray");let t=setTimeout(()=>{window.print()},250);return()=>{clearTimeout(t),document.body.classList.remove("print-xray"),window.removeEventListener("afterprint",e)}},[s,n]);let d=r.length,o=(0,i.useMemo)(()=>d<=1?"grid grid-cols-1 grid-rows-1":2===d?"grid grid-cols-1 grid-rows-2":3===d||4===d?"grid grid-cols-2 grid-rows-2":"grid grid-cols-3 grid-rows-3",[d]),c=(0,i.useMemo)(()=>d<=4?r:r.slice(0,9),[r,d]);return a?(0,m.createPortal)((0,t.jsxs)("div",{className:`xray-print-root ${s?"":"hidden"} print:block`,children:[(0,t.jsx)("style",{children:`
        .xray-print-root { display: none; }

        @media print {
          body.print-xray > *:not(.xray-print-root) { display: none !important; }
          body.print-xray .xray-print-root { display: block !important; }

          @page { size: A4; margin: 0; }

          html, body {
            margin: 0 !important;
            padding: 0 !important;
            background: #fff !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
          }

          .xray-a4 {
            width: 210mm;
            height: 297mm;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background: white;
            overflow: hidden;
          }
        }
      `}),(0,t.jsx)("div",{className:"xray-a4",children:(0,t.jsx)("div",{className:`${o} h-full w-full gap-0`,children:c.map(e=>(0,t.jsx)("div",{className:"relative h-full w-full border border-black/5",children:(0,t.jsx)(x,{xrayId:e})},e))})})]}),document.body):null}function g(e){return"object"==typeof e&&null!==e}function j(e){return"number"==typeof e&&Number.isFinite(e)?e:null}function v(e,t){try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:t,maximumFractionDigits:0}).format(e)}catch{return`${t} ${Math.round(e)}`}}function b(e){return e&&e.replace("Visit:","").trim()||"—"}function y(e){let{open:s=!1,billing:r,patientName:n,patientPhone:a,ageSexLabel:l,opdNo:d,sdId:o,visitDateLabel:c,onAfterPrint:u}=e,[p,x]=i.useState(!1);i.useEffect(()=>x(!0),[]);let f=r?.currency??"INR",y=r?.billNo??"—",N=i.useMemo(()=>{let e=r?.createdAt;if(!e)return"—";try{return new Intl.DateTimeFormat("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(e))}catch{return"—"}},[r]);if(i.useEffect(()=>{if(!p||!s||!r)return;let e=()=>{document.body.classList.remove("print-bill"),window.removeEventListener("afterprint",e),u?.()};return window.addEventListener("afterprint",e),document.body.classList.add("print-bill"),requestAnimationFrame(()=>{requestAnimationFrame(()=>window.print())}),()=>{window.removeEventListener("afterprint",e),document.body.classList.remove("print-bill")}},[p,s,r,u]),!p)return null;let w=r?function(e){if(!g(e))return[];let t=e.items;return Array.isArray(t)?t:[]}(r):[],S=r?.total??0,_=function(e){let t=Math.floor(Math.abs(e));if(0===t)return"ZERO ONLY";let s=["","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN","ELEVEN","TWELVE","THIRTEEN","FOURTEEN","FIFTEEN","SIXTEEN","SEVENTEEN","EIGHTEEN","NINETEEN"],i=["","","TWENTY","THIRTY","FORTY","FIFTY","SIXTY","SEVENTY","EIGHTY","NINETY"],r=e=>{let t=Math.floor(e/100),r=e%100,n=t?`${s[t]} HUNDRED`:"",a=r?`${(e=>{if(e<20)return s[e];let t=Math.floor(e/10),r=e%10;return`${i[t]}${r?` ${s[r]}`:""}`.trim()})(r)}`:"";return`${n}${n&&a?" ":""}${a}`.trim()},n=Math.floor(t/1e7),a=Math.floor(t%1e7/1e5),l=Math.floor(t%1e5/1e3),d=t%1e3,o=[];return n&&o.push(`${r(n)} CRORE`),a&&o.push(`${r(a)} LAKH`),l&&o.push(`${r(l)} THOUSAND`),d&&o.push(r(d)),`${o.join(" ").replace(/\s+/g," ").trim()} ONLY`}(S),R="—"!==b(c)?b(c):N;return(0,m.createPortal)((0,t.jsxs)("div",{className:`bill-print-root ${s?"":"hidden"}`,children:[(0,t.jsx)("style",{children:`
        .bill-print-root { display: none; }

        @media print {
          body.print-bill > *:not(.bill-print-root) { display: none !important; }
          body.print-bill .bill-print-root { display: block !important; }

          @page { size: A4; margin: 0; }

          html, body {
            margin: 0 !important;
            padding: 0 !important;
            background: #fff !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
          }

          .bill-a4 {
            width: 210mm;
            height: 297mm;
            margin: 0 auto;
            padding: 10mm;
            box-sizing: border-box;
            background: #fff;
            color: #0b0b0b;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
          }

          .muted { color: rgba(0,0,0,0.62); }
          .hairline { height: 0.6pt; background: rgba(0,0,0,0.18); width: 100%; }

          .header-doctors { display:flex; align-items:center; justify-content:center; gap: 30px; }
          .doc-name { font-size: 14px; font-weight: 900; line-height: 1.05; white-space: nowrap; }
          .doc-sub { font-size: 10.5px; font-weight: 800; line-height: 1.05; color: rgba(0,0,0,0.62); white-space: nowrap; }
          .clinic-line { margin-top: 4px; font-size: 10px; font-weight: 700; letter-spacing: .04em; color: rgba(0,0,0,0.55); }

          .meta { border: 0.6pt solid rgba(0,0,0,0.24); border-radius: 2.2mm; overflow:hidden; }
          .meta-grid { display:grid; grid-template-columns: 1fr 1fr; }
          .meta-cell { padding: 6px 10px; border-bottom: 0.6pt solid rgba(0,0,0,0.14); }
          .meta-cell:nth-child(odd) { border-right: 0.6pt solid rgba(0,0,0,0.14); }
          .meta-cell.last-row { border-bottom: 0; }

          .meta-line { display:flex; align-items: baseline; gap: 8px; min-width: 0; font-size: 12px; line-height: 1.15; }
          .meta-label { font-weight: 900; color: rgba(0,0,0,0.65); white-space: nowrap; }
          .meta-sep { font-weight: 900; color: rgba(0,0,0,0.45); margin-left: -2px; }
          .meta-value { font-weight: 800; color: rgba(0,0,0,0.90); min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

          .meta-trip {
            display: grid;
            grid-template-columns: 1.2fr 0.9fr 0.9fr;
            gap: 0;
          }
          .meta-trip > div {
            padding: 6px 10px;
            border-right: 0.6pt solid rgba(0,0,0,0.14);
          }
          .meta-trip > div:last-child { border-right: 0; }

          .tbl { width:100%; border-collapse: collapse; border: 0.6pt solid rgba(0,0,0,0.24); border-radius: 2.2mm; overflow:hidden; }
          .tbl th, .tbl td { border-bottom: 0.6pt solid rgba(0,0,0,0.12); padding: 6px 10px; font-size: 12px; line-height: 1.15; }
          .tbl thead th { background: rgba(0,0,0,0.03); font-weight: 950; border-bottom: 0.6pt solid rgba(0,0,0,0.20); }
          .tbl td + td, .tbl th + th { border-left: 0.6pt solid rgba(0,0,0,0.12); }
          .tbl tbody tr:last-child td { border-bottom: 0; }

          .totals { width: 290px; border: 0.6pt solid rgba(0,0,0,0.24); border-radius: 2.2mm; overflow:hidden; }
          .totals-row { display:grid; grid-template-columns: 1fr auto; gap: 12px; padding: 9px 12px; font-size: 12px; }
          .totals-row .label { font-weight: 950; color: rgba(0,0,0,0.60); }
          .totals-row .value { font-weight: 950; color: rgba(0,0,0,0.92); font-variant-numeric: tabular-nums; }

          .sig-line { display:inline-block; width: 175px; height: 0.6pt; background: rgba(0,0,0,0.35); margin-top: 16px; }
          .footer { font-size: 10px; color: rgba(0,0,0,0.52); text-align:center; }
        }
      `}),(0,t.jsx)("div",{className:"bill-a4",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{className:"flex w-[28%] items-start",children:(0,t.jsx)("div",{className:"relative h-13.5 w-13.5",children:(0,t.jsx)(h.default,{src:"/rx-logo-r.png",alt:"Clinic logo",fill:!0,className:"object-contain",priority:!0,unoptimized:!0})})}),(0,t.jsxs)("div",{className:"w-[60%] text-center pt-4",children:[(0,t.jsxs)("div",{className:"header-doctors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"doc-name",children:"Dr. Soumendra Sarangi"}),(0,t.jsx)("div",{className:"doc-sub",children:"B.D.S. Redg. - 68"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"doc-name",children:"Dr. Vaishnovee Sarangi"}),(0,t.jsx)("div",{className:"doc-sub",children:"B.D.S. Redg. - 3057"})]})]}),(0,t.jsx)("div",{className:"clinic-line",children:"SCR-76, UNIT-III, BHUBANESWAR"})]}),(0,t.jsx)("div",{className:"w-[28%]",children:(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("div",{className:"relative h-13.5 w-41",children:(0,t.jsx)(h.default,{src:"/dashboard-logo.png",alt:"Sarangi Dentistry",fill:!0,className:"object-contain",priority:!0,unoptimized:!0})})})})]}),(0,t.jsx)("div",{className:"hairline mt-5"})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-3",children:[(0,t.jsx)("div",{className:"hairline",style:{maxWidth:"92px"}}),(0,t.jsx)("div",{className:"text-center text-[12px] font-extrabold tracking-[0.16em]",children:"MONEY RECEIPT"}),(0,t.jsx)("div",{className:"hairline",style:{maxWidth:"92px"}})]}),(0,t.jsx)("div",{className:"mt-3 meta",children:(0,t.jsxs)("div",{className:"meta-grid",children:[(0,t.jsx)("div",{className:"meta-cell",children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"Patient Name"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:n??"—"})]})}),(0,t.jsx)("div",{className:"meta-cell",children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"Age / Sex"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:l??"—"})]})}),(0,t.jsx)("div",{className:"meta-cell",children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"OPD"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:d??"—"})]})}),(0,t.jsx)("div",{className:"meta-cell",children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"Mob"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:a??"—"})]})}),(0,t.jsx)("div",{className:"meta-cell last-row",style:{gridColumn:"1 / span 2",padding:0},children:(0,t.jsxs)("div",{className:"meta-trip",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"SD ID"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:o??"—"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"Receipt"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:y})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"meta-line",children:[(0,t.jsx)("span",{className:"meta-label",children:"Date"}),(0,t.jsx)("span",{className:"meta-sep",children:":"}),(0,t.jsx)("span",{className:"meta-value",children:R})]})})]})})]})}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("table",{className:"tbl",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:"52px",textAlign:"left"},children:"Sl"}),(0,t.jsx)("th",{style:{textAlign:"left"},children:"Service Name"}),(0,t.jsx)("th",{style:{width:"92px",textAlign:"right"},children:"Price"}),(0,t.jsx)("th",{style:{width:"64px",textAlign:"center"},children:"Qty"}),(0,t.jsx)("th",{style:{width:"118px",textAlign:"right"},children:"Amount"})]})}),(0,t.jsx)("tbody",{children:0===w.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,style:{padding:"10px 12px",fontSize:12},children:"No billing items."})}):w.map((e,s)=>{let i=g(e)&&null!==j(e.quantity)?Math.max(1,Math.floor(j(e.quantity)??1)):1,r=e.lineTotal??0,n=g(e)&&null!==j(e.unitPrice)?j(e.unitPrice):i?Math.round(r/i):Math.round(r);return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{textAlign:"left",fontWeight:900},children:s+1}),(0,t.jsx)("td",{style:{textAlign:"left",fontWeight:900},children:(e.description||"—").replace(/\s+/g," ").trim().toUpperCase()}),(0,t.jsx)("td",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:v(n,f)}),(0,t.jsx)("td",{style:{textAlign:"center",fontWeight:900},children:i}),(0,t.jsx)("td",{style:{textAlign:"right",fontWeight:950,fontVariantNumeric:"tabular-nums"},children:v(r,f)})]},`${e.description}-${s}`)})})]})}),(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)("div",{className:"totals",children:(0,t.jsxs)("div",{className:"totals-row",children:[(0,t.jsx)("div",{className:"label",children:"Total Amount"}),(0,t.jsx)("div",{className:"value",children:v(S,f)})]})})}),(0,t.jsxs)("div",{className:"mt-4 text-[11px]",children:[(0,t.jsx)("div",{className:"hairline"}),(0,t.jsxs)("div",{className:"mt-2 flex items-start justify-between gap-6",children:[(0,t.jsx)("div",{className:"min-w-0",children:(0,t.jsxs)("div",{className:"text-[11px] font-semibold",children:[(0,t.jsx)("span",{className:"muted",children:"Vide Cash / Card"}),(0,t.jsx)("span",{className:"ml-3",style:{fontWeight:950},children:_})]})}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"sig-line"}),(0,t.jsx)("div",{className:"mt-1 text-[10px] font-semibold muted",children:"Authorized Signature"})]})]})]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)("div",{className:"mt-4 footer",children:"Generated by Sarangi DMS"})]})})]}),document.body)}var N=e.i(50106);function w(e){return(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...e,children:(0,t.jsx)("path",{d:"M20 6 9 17l-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function S(e){return"object"==typeof e&&null!==e}function _(e,t){var s;return"string"==typeof(s=e[t])&&s.trim()?s:void 0}function R(e,t){var s;return"number"==typeof(s=e[t])&&Number.isFinite(s)?s:void 0}function E(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${i}`}function A(){var e,m;let h,x,g=(0,r.useParams)(),j=(0,r.useRouter)(),v=(0,N.useAuth)(),b=String(g?.visitId??""),A="authenticated"===v.status?v.role:void 0,F=(0,p.useGetVisitByIdQuery)(b,{skip:!b}).data,C=S(F)?F:{},T=_(C,"patientId"),k=(0,p.useGetPatientByIdQuery)(T??"",{skip:!T}),I=(0,p.useGetVisitRxQuery)({visitId:b},{skip:!b}),z=I.data?.rx??null,D=(0,p.useListVisitXraysQuery)({visitId:b},{skip:!b}),P=(D.data?.items??[]).map(e=>e.xrayId),L=!!F&&(!0===("boolean"==typeof(e=C.checkedOut)?e:void 0)||void 0!==R(C,"billingAmount")),O=!!b&&!!F&&L,M=(0,p.useGetVisitBillQuery)({visitId:b},{skip:!O}),$=M.data??null,B=S($)&&_($,"billNo")?$:null,[H,V]=i.useState(!1),[U,Y]=i.useState(!1),[W,X]=i.useState(!1),G=k.data?.name,q=k.data?.phone,Q=S(k.data)?k.data:{},K=_(Q,"sdId")??_(C,"sdId")??void 0,Z=_(C,"opdNo")??_(C,"opdId")??_(C,"opdNumber")??void 0,J=Q.dob??Q.dateOfBirth??Q.birthDate??Q.dobIso??null,ee=Q.sex??Q.gender??Q.patientSex??null,et=function(e){if(!e)return null;if("number"==typeof e&&Number.isFinite(e)){let t=new Date(e);return Number.isFinite(t.getTime())?t:null}if("string"==typeof e){let t=e.trim();if(!t)return null;let s=/^(\d{4})-(\d{2})-(\d{2})$/.exec(t);if(s){let e=new Date(Number(s[1]),Number(s[2])-1,Number(s[3]));return Number.isFinite(e.getTime())?e:null}let i=new Date(t);return Number.isFinite(i.getTime())?i:null}return e instanceof Date&&Number.isFinite(e.getTime())?e:null}(J),es=R(C,"createdAt")??Date.now(),ei=et?(h=(m=new Date(es)).getFullYear()-et.getFullYear(),((x=m.getMonth()-et.getMonth())<0||0===x&&m.getDate()<et.getDate())&&(h-=1),h<0?0:h):void 0,er=function(e){if(!e)return;let t=String(e).trim().toUpperCase();return"M"===t||"MALE"===t?"M":"F"===t||"FEMALE"===t?"F":"O"===t||"OTHER"===t?"O":"U"===t||"UNKNOWN"===t?"U":"M"===t||"F"===t||"O"===t||"U"===t?t:void 0}(ee),en=es?`Visit: ${E(new Date(es))}`:void 0,ea=_(C,"visitDate")?`Visit: ${String(C.visitDate)}`:void 0,el=!!z,ed=P.length>0,eo=L&&!!B,[ec,eu]=i.useState(!1),[em,eh]=i.useState(()=>{let e=new Date;return e.setDate(e.getDate()+7),E(e)}),[ep,ex]=i.useState(!1),ef=i.useMemo(()=>(function(e){let t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e);if(!t)return null;let s=new Date(Number(t[1]),Number(t[2])-1,Number(t[3]));return Number.isFinite(s.getTime())?s:null})(em)??new Date,[em]),[eg,ej]=i.useState("CALL"),[ev,eb]=i.useState(""),ey=e=>{if(!b)return;let t=new URLSearchParams;t.set("visitId",b),t.set("mode",e),ec&&t.set("enabled","1"),em&&t.set("date",em),eg&&t.set("contact",eg),ev.trim()&&t.set("reason",ev.trim()),j.push(`/reminders?${t.toString()}`)},eN=u.PrescriptionPrintSheet,ew=void 0!==ei?`${ei} / ${er??"—"}`:"—";return(0,t.jsxs)("section",{className:"jsx-9641918de5fd9460 p-4 2xl:p-8",children:[(0,t.jsx)(s.default,{id:"9641918de5fd9460",children:"@keyframes pulseRing{0%{opacity:.9;transform:scale(.75)}to{opacity:0;transform:scale(1.35)}}"}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-lg font-semibold text-gray-900",children:"Documents"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs text-gray-500",children:_(C,"status")??"—"})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 flex flex-wrap items-center justify-end gap-2",children:["ADMIN"===A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"rounded-xl cursor-pointer",onClick:()=>j.back(),children:"Back"}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"rounded-xl cursor-pointer",onClick:()=>j.push(`/visits/${b}/checkout/billing`),children:"Billing"})]}):null,(0,t.jsx)(a.Button,{type:"button",variant:"default",className:"rounded-xl bg-black text-white hover:bg-black/90 cursor-pointer",onClick:()=>{X(!0),window.setTimeout(()=>{j.replace("/")},850)},disabled:W,children:W?(0,t.jsxs)("span",{className:"jsx-9641918de5fd9460 inline-flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"jsx-9641918de5fd9460 relative inline-flex h-5 w-5 items-center justify-center",children:[(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 absolute inset-0 rounded-full ring-2 ring-emerald-300 animate-[pulseRing_800ms_ease-out]"}),(0,t.jsx)(w,{className:"h-5 w-5 text-emerald-300"})]}),"Done"]}):"Done"})]})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 mb-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[(0,t.jsxs)(l.Card,{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs text-gray-500",children:"Patient"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 mt-1 text-base font-semibold text-gray-900",children:G??"—"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 mt-1 text-sm text-gray-600",children:q??"—"})]}),(0,t.jsxs)(l.Card,{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs text-gray-500",children:"Doctor"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 mt-1 text-base font-semibold text-gray-900",children:"—"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 mt-1 text-sm text-gray-600",children:ea?.replace("Visit:","").trim()||"—"})]}),(0,t.jsxs)(l.Card,{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs text-gray-500",children:"Print readiness"}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 mt-2 space-y-1 text-xs",children:[(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 text-gray-700",children:"Prescription"}),(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 "+((el?"text-emerald-700 font-semibold":"text-gray-400")||""),children:el?"Ready":"Not Available"})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 text-gray-700",children:"X-rays"}),(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 "+((ed?"text-emerald-700 font-semibold":"text-gray-400")||""),children:ed?"Ready":"Not Available"})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 text-gray-700",children:"Bill"}),(0,t.jsx)("span",{className:"jsx-9641918de5fd9460 "+((eo?"text-emerald-700 font-semibold":L&&M.isLoading?"text-gray-700":"text-gray-400")||""),children:eo?"Ready":L&&M.isLoading?"Loading…":"Not Available"})]})]})]})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 grid grid-cols-1 gap-4 lg:grid-cols-12",children:[(0,t.jsxs)(l.Card,{className:"lg:col-span-7 rounded-2xl border bg-white p-6",children:[(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-lg font-semibold text-gray-900",children:"Print"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs text-gray-500",children:"Documents are ready to print."})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 mt-6 flex flex-col items-center justify-center gap-3 py-8",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"w-full max-w-sm rounded-2xl py-6 text-base cursor-pointer",onClick:()=>j.push(`/visits/${b}/checkout/printing/prescription`),disabled:!el,title:el?"Open print preview":"No prescription available",children:"Print Prescription"}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"w-full max-w-sm rounded-2xl py-6 text-base cursor-pointer",onClick:()=>{ed?V(!0):n.toast.info("No X-rays uploaded for this visit.")},disabled:!ed,title:ed?"Print X-rays":"No X-rays uploaded",children:"Print X-rays"}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"w-full max-w-sm rounded-2xl py-6 text-base cursor-pointer",onClick:()=>{eo?Y(!0):n.toast.info("No bill found for this visit.")},disabled:!eo,title:eo?"Print bill":"No bill found",children:"Print Bill"})]})]}),(0,t.jsxs)(l.Card,{className:"lg:col-span-5 rounded-2xl border bg-white p-6",children:[(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-lg font-semibold text-gray-900",children:"Follow-up"}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs text-gray-500",children:"Add follow-up for this visit."})]}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"rounded-xl cursor-pointer",onClick:()=>eu(e=>!e),children:ec?"Disable":"Enable"})]}),(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 mt-4 space-y-3",children:ec?(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 rounded-2xl border bg-gray-50 p-4",children:(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 space-y-3",children:[(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs font-semibold text-gray-700",children:"Follow-up date"}),(0,t.jsxs)(c.Popover,{open:ep,onOpenChange:ex,children:[(0,t.jsx)(c.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"mt-1 h-10 w-full justify-start rounded-xl bg-white px-3 text-sm font-normal cursor-pointer",children:em||"Select a date"})}),(0,t.jsx)(c.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(o.Calendar,{mode:"single",selected:ef,onSelect:e=>{e&&(eh(E(e)),ex(!1))},initialFocus:!0})})]})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs font-semibold text-gray-700",children:"Contact method"}),(0,t.jsxs)("select",{value:eg,onChange:e=>{var t;return ej("CALL"===(t=e.target.value)||"SMS"===t||"WHATSAPP"===t||"OTHER"===t?t:"CALL")},className:"jsx-9641918de5fd9460 mt-1 h-10 w-full rounded-xl border border-gray-200 bg-white px-3 text-sm cursor-pointer",children:[(0,t.jsx)("option",{value:"CALL",className:"jsx-9641918de5fd9460 cursor-pointer",children:"CALL"}),(0,t.jsx)("option",{value:"SMS",className:"jsx-9641918de5fd9460 cursor-pointer",children:"SMS"}),(0,t.jsx)("option",{value:"WHATSAPP",className:"jsx-9641918de5fd9460 cursor-pointer",children:"WHATSAPP"}),(0,t.jsx)("option",{value:"OTHER",className:"jsx-9641918de5fd9460 cursor-pointer",children:"OTHER"})]})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460",children:[(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 text-xs font-semibold text-gray-700",children:"Reason / notes"}),(0,t.jsx)(d.Textarea,{className:"mt-1 min-h-22.5 rounded-xl bg-white",placeholder:"e.g., stitch removal / review pain / follow-up check",value:ev,onChange:e=>eb(e.target.value)})]}),(0,t.jsxs)("div",{className:"jsx-9641918de5fd9460 flex flex-col gap-2",children:[(0,t.jsx)(a.Button,{type:"button",className:"w-full rounded-2xl bg-black py-5 text-white hover:bg-black/90 cursor-pointer",onClick:()=>{/^\d{4}-\d{2}-\d{2}$/.test(em)?ey("add"):n.toast.error("Follow-up date must be YYYY-MM-DD.")},children:"Add Follow-up"}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"w-full rounded-2xl py-5 cursor-pointer",onClick:()=>ey("list"),children:"View Follow-ups"})]})]})}):(0,t.jsx)("div",{className:"jsx-9641918de5fd9460 rounded-2xl border border-dashed p-4 text-sm text-gray-600",children:"Follow-up is disabled."})})]})]}),(0,t.jsx)(eN,{patientName:G,patientPhone:q,patientAge:ei,patientSex:er,sdId:K,opdNo:Z,doctorName:void 0,doctorRegdLabel:void 0,visitDateLabel:en,lines:z?.lines??[],receptionNotes:z?.receptionNotes??"",className:"jsx-9641918de5fd9460"}),(0,t.jsx)(f,{open:H,xrayIds:P,onAfterPrint:()=>V(!1)}),(0,t.jsx)(y,{open:U,billing:B,patientName:G,patientPhone:q,ageSexLabel:ew,opdNo:Z,sdId:K,visitDateLabel:ea,onAfterPrint:()=>Y(!1)})]})}e.s(["default",()=>A],73888)}]);